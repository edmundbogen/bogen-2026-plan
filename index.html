<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edmund Bogen Team — 2026 Operating Plan</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            /* Edmund Bogen Brand Colors */
            --brand-primary: #00a8e1;      /* Bright Blue - accent color */
            --brand-primary-dark: #0090c4; /* Darker blue for hover states */
            --brand-primary-light: #e6f7fc; /* Light blue for backgrounds */
            --navy: #1a3e5c;               /* Brand navy - primary background */
            --navy-light: #2a5275;
            --navy-dark: #0f2a42;
            --white: #FFFFFF;
            --off-white: #f4f4f4;
            --gray-100: #f4f4f4;
            --gray-200: #e8e8e8;
            --gray-300: #D1D1D1;
            --gray-400: #9CA3AF;
            --gray-500: #6B7280;
            --gray-600: #4B5563;
            --gray-700: #374151;
            --success: #059669;
            --success-light: #D1FAE5;
            --warning: #D97706;
            --warning-light: #FEF3C7;
            --danger: #DC2626;
            --danger-light: #FEE2E2;
            --info: #00a8e1;               /* Match brand blue */
            --info-light: #e6f7fc;
            --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1);
            --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background-color: var(--off-white);
            color: var(--navy);
            line-height: 1.6;
        }

        h1, h2, h3, h4 {
            font-family: 'Montserrat', -apple-system, BlinkMacSystemFont, sans-serif;
            font-weight: 400;
            text-transform: uppercase;
            letter-spacing: 0.08em;
        }

        /* Login Screen */
        #login-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--navy) 0%, var(--navy-dark) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .login-container {
            text-align: center;
        }

        .login-logo {
            color: var(--white);
            font-family: 'Montserrat', sans-serif;
            font-size: 2rem;
            font-weight: 300;
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 0.15em;
        }

        .login-subtitle {
            color: var(--brand-primary);
            font-size: 0.875rem;
            margin-bottom: 2rem;
            letter-spacing: 0.15em;
            text-transform: uppercase;
            font-weight: 500;
        }

        .login-box {
            background: var(--white);
            padding: 3rem;
            border-radius: 8px;
            box-shadow: var(--shadow-xl);
            width: 100%;
            max-width: 400px;
        }

        .login-box h2 {
            font-size: 1.5rem;
            margin-bottom: 1.5rem;
            color: var(--navy);
        }

        .form-group {
            margin-bottom: 1.25rem;
            text-align: left;
        }

        .form-group label {
            display: block;
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--gray-600);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 0.5rem;
        }

        .form-group select,
        .form-group input {
            width: 100%;
            padding: 0.875rem 1rem;
            border: 1px solid var(--gray-300);
            border-radius: 6px;
            font-size: 1rem;
            transition: border-color 0.2s, box-shadow 0.2s;
        }

        .form-group select:focus,
        .form-group input:focus {
            outline: none;
            border-color: var(--brand-primary);
            box-shadow: 0 0 0 3px rgba(0, 168, 225, 0.15);
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 0.875rem 1.5rem;
            border: none;
            border-radius: 6px;
            font-size: 0.875rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        /* Micro-interaction: button press effect */
        .btn:active {
            transform: scale(0.97);
        }

        .btn-primary {
            background: var(--brand-primary);
            color: var(--white);
            width: 100%;
            box-shadow: 0 2px 4px rgba(0, 168, 225, 0.3);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            font-weight: 500;
        }

        .btn-primary:hover {
            background: var(--brand-primary-dark);
            box-shadow: 0 4px 8px rgba(0, 168, 225, 0.4);
            transform: translateY(-1px);
        }

        .btn-primary:active {
            transform: translateY(0) scale(0.98);
            box-shadow: 0 1px 2px rgba(0, 168, 225, 0.3);
        }

        .btn-secondary {
            background: var(--gray-200);
            color: var(--gray-700);
        }

        .btn-secondary:hover {
            background: var(--gray-300);
        }

        .btn-outline {
            background: transparent;
            border: 1px solid var(--gray-300);
            color: var(--gray-600);
        }

        .btn-outline:hover {
            background: var(--gray-100);
        }

        .btn-danger {
            background: var(--danger);
            color: white;
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .login-error {
            color: var(--danger);
            font-size: 0.875rem;
            margin-top: 1rem;
            display: none;
        }

        /* App Layout */
        #app {
            display: none;
        }

        .app-header {
            background: var(--navy);
            color: var(--white);
            padding: 0 2rem;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-inner {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            height: 70px;
        }

        .header-brand {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .header-logo {
            font-family: 'Montserrat', sans-serif;
            font-size: 1.25rem;
            font-weight: 300;
            color: var(--white);
            text-transform: uppercase;
            letter-spacing: 0.12em;
        }

        .header-divider {
            width: 3px;
            height: 28px;
            background: var(--brand-primary);
        }

        .header-title {
            font-size: 0.75rem;
            color: var(--white);
            text-transform: uppercase;
            letter-spacing: 0.15em;
            font-weight: 400;
            opacity: 0.9;
        }

        .header-user {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .user-info {
            text-align: right;
        }

        .user-name {
            font-weight: 600;
            font-size: 0.875rem;
        }

        .user-role {
            font-size: 0.75rem;
            color: var(--brand-primary);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .logout-btn {
            padding: 0.5rem 1rem;
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            color: var(--white);
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.8125rem;
            transition: all 0.2s;
        }

        .logout-btn:hover {
            background: rgba(255,255,255,0.2);
        }

        /* Navigation */
        .app-nav {
            background: var(--white);
            border-bottom: 1px solid var(--gray-200);
            padding: 0 2rem;
        }

        .nav-inner {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            gap: 0;
            overflow-x: auto;
        }

        .nav-item {
            padding: 1rem 1.5rem;
            font-size: 0.8125rem;
            font-weight: 500;
            color: var(--gray-500);
            text-decoration: none;
            border-bottom: 3px solid transparent;
            cursor: pointer;
            white-space: nowrap;
            transition: all 0.2s;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            background: none;
            border-top: none;
            border-left: none;
            border-right: none;
        }

        .nav-item:hover {
            color: var(--navy);
        }

        .nav-item.active {
            color: var(--navy);
            border-bottom-color: var(--brand-primary);
        }

        .nav-item.hidden {
            display: none;
        }

        /* Main Content */
        .main-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }

        /* Page Header */
        .page-header {
            margin-bottom: 2rem;
        }

        .page-header h1 {
            font-size: 1.75rem;
            color: var(--navy);
            margin-bottom: 0.5rem;
        }

        .page-header p {
            color: var(--gray-500);
            font-size: 0.9375rem;
        }

        /* Cards */
        .card {
            background: var(--white);
            border-radius: 8px;
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--gray-200);
            transition: box-shadow 0.2s ease, transform 0.2s ease;
        }

        .card:hover {
            box-shadow: var(--shadow-md);
        }

        .card-header {
            padding: 1.25rem 1.5rem;
            border-bottom: 1px solid var(--gray-200);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .card-header h3 {
            font-size: 1rem;
            font-family: 'Inter', sans-serif;
            font-weight: 600;
        }

        .card-body {
            padding: 1.5rem;
        }

        /* Metric Cards */
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .metric-card {
            background: var(--white);
            padding: 1.5rem;
            border-radius: 8px;
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--gray-200);
            transition: box-shadow 0.2s ease, transform 0.2s ease;
        }

        .metric-card:hover {
            box-shadow: var(--shadow-md);
            transform: translateY(-2px);
        }

        .metric-card.alert {
            border-left: 4px solid var(--danger);
            background: var(--danger-light);
        }

        .metric-card.warning {
            border-left: 4px solid var(--warning);
        }

        .metric-card.success {
            border-left: 4px solid var(--success);
        }

        .metric-label {
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--gray-500);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 0.5rem;
        }

        .metric-value {
            font-size: 2rem;
            font-weight: 700;
            font-family: 'Montserrat', sans-serif;
        }

        .metric-value.positive { color: var(--success); }
        .metric-value.negative { color: var(--danger); }
        .metric-value.warning { color: var(--warning); }
        .metric-value.neutral { color: var(--navy); }

        .metric-subtitle {
            font-size: 0.8125rem;
            color: var(--gray-500);
            margin-top: 0.25rem;
        }

        .metric-target {
            font-size: 0.75rem;
            color: var(--gray-500);
            margin-top: 0.5rem;
        }

        /* Alerts - Compact Inline Style */
        #stop-loss-alerts {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .alert-banner {
            padding: 0.35rem 0.75rem;
            border-radius: 4px;
            display: inline-flex;
            align-items: center;
            gap: 0.4rem;
            font-size: 0.7rem;
        }

        .alert-banner.danger {
            background: var(--danger-light);
            border: 1px solid var(--danger);
            color: var(--danger);
        }

        .alert-banner.warning {
            background: var(--warning-light);
            border: 1px solid var(--warning);
            color: var(--warning);
        }

        .alert-banner.success {
            background: var(--success-light);
            border: 1px solid var(--success);
            color: var(--success);
        }

        .alert-icon {
            font-size: 0.8rem;
        }

        .alert-content {
            display: flex;
            align-items: center;
            gap: 0.35rem;
        }

        .alert-title {
            font-weight: 600;
        }

        .alert-message {
            font-size: 0.7rem;
            opacity: 0.9;
        }

        /* Tables */
        .table-wrapper {
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th, td {
            padding: 0.875rem 1rem;
            text-align: left;
            border-bottom: 1px solid var(--gray-200);
        }

        th {
            background: var(--gray-100);
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--gray-600);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        td {
            font-size: 0.875rem;
        }

        tr:hover {
            background: var(--gray-100);
        }

        /* Status Badges */
        .badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .badge-success { background: var(--success-light); color: var(--success); }
        .badge-warning { background: var(--warning-light); color: var(--warning); }
        .badge-danger { background: var(--danger-light); color: var(--danger); }
        .badge-info { background: var(--info-light); color: var(--info); }
        .badge-gray { background: var(--gray-200); color: var(--gray-600); }

        /* Client type badges */
        .badge-seller {
            background: var(--info-light);
            color: var(--info);
            border: 1px solid var(--info);
        }
        .badge-buyer {
            background: var(--success-light);
            color: var(--success);
            border: 1px solid var(--success);
        }

        /* Type filter button styles */
        .type-btn.active[data-type="seller"] {
            background: var(--info);
            color: white;
            border-color: var(--info);
        }
        .type-btn.active[data-type="buyer"] {
            background: var(--success);
            color: white;
            border-color: var(--success);
        }

        /* Closing range filter buttons */
        .closing-range-btn {
            padding: 0.375rem 0.75rem;
            font-size: 0.75rem;
        }
        .closing-range-btn.active {
            background: var(--navy);
            color: white;
            border-color: var(--navy);
        }

        /* Progress Bar */
        .progress-bar {
            height: 8px;
            background: var(--gray-200);
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--brand-primary);
            border-radius: 4px;
            transition: width 0.3s;
        }

        .progress-fill.success { background: var(--success); }
        .progress-fill.warning { background: var(--warning); }
        .progress-fill.danger { background: var(--danger); }

        /* Grid Layouts */
        .grid-2 {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1.5rem;
        }

        .grid-3 {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1.5rem;
        }

        @media (max-width: 1024px) {
            .grid-3 { grid-template-columns: repeat(2, 1fr); }
        }

        @media (max-width: 768px) {
            .grid-2, .grid-3 { grid-template-columns: 1fr; }
            .main-content { padding: 1rem; }
            .app-header { padding: 0 1rem; }
            .app-nav { padding: 0 1rem; }
        }

        /* Tab Content */
        .page-content {
            display: none;
            opacity: 0;
            transition: opacity 0.2s ease;
        }

        .page-content.active {
            display: block;
            opacity: 1;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Calculator Section */
        .calculator-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
        }

        @media (max-width: 900px) {
            .calculator-grid { grid-template-columns: 1fr; }
        }

        .calc-inputs {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .calc-result {
            background: var(--navy);
            color: var(--white);
            padding: 2rem;
            border-radius: 8px;
        }

        .calc-result h4 {
            color: var(--brand-primary);
            margin-bottom: 1.5rem;
            font-size: 1.125rem;
        }

        .calc-line {
            display: flex;
            justify-content: space-between;
            padding: 0.75rem 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .calc-line:last-child {
            border-bottom: none;
        }

        .calc-line.total {
            font-weight: 700;
            font-size: 1.25rem;
            border-top: 2px solid var(--brand-primary);
            margin-top: 1rem;
            padding-top: 1rem;
        }

        .calc-line .label {
            color: var(--gray-400);
        }

        .calc-line .value {
            font-weight: 600;
        }

        .calc-line .value.highlight {
            color: var(--brand-primary);
        }

        /* Pipeline Stages */
        .pipeline-stages {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .stage-btn {
            padding: 0.5rem 1rem;
            border: 1px solid var(--gray-300);
            background: var(--white);
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.8125rem;
            transition: all 0.2s;
        }

        .stage-btn:hover {
            background: var(--gray-100);
        }

        .stage-btn.active {
            background: var(--navy);
            color: var(--white);
            border-color: var(--navy);
        }

        .stage-count {
            display: inline-block;
            background: var(--gray-200);
            padding: 0.125rem 0.5rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            margin-left: 0.5rem;
        }

        .stage-btn.active .stage-count {
            background: rgba(255,255,255,0.2);
        }

        /* Forms in modals */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 200;
        }

        .modal-overlay.active {
            display: flex;
        }

        .modal {
            background: var(--white);
            border-radius: 8px;
            width: 100%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            padding: 1.5rem;
            border-bottom: 1px solid var(--gray-200);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h3 {
            font-size: 1.125rem;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--gray-500);
        }

        .modal-body {
            padding: 1.5rem;
        }

        .modal-footer {
            padding: 1rem 1.5rem;
            border-top: 1px solid var(--gray-200);
            display: flex;
            justify-content: flex-end;
            gap: 0.75rem;
        }

        /* Checklist */
        .checklist {
            list-style: none;
        }

        .checklist-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 0;
            border-bottom: 1px solid var(--gray-200);
        }

        .checklist-item:last-child {
            border-bottom: none;
        }

        .checklist-checkbox {
            width: 20px;
            height: 20px;
            border: 2px solid var(--gray-300);
            border-radius: 4px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        .checklist-checkbox.checked {
            background: var(--success);
            border-color: var(--success);
            color: white;
        }

        .checklist-text {
            flex: 1;
        }

        .checklist-text.completed {
            text-decoration: line-through;
            color: var(--gray-500);
        }

        /* Print Styles */
        @media print {
            .app-header, .app-nav, .btn, .modal-overlay {
                display: none !important;
            }
            .main-content {
                max-width: 100%;
                padding: 0;
            }
            .card {
                break-inside: avoid;
                box-shadow: none;
                border: 1px solid #ccc;
            }
            .page-content {
                display: block !important;
            }
        }

        /* Scorecard Grid */
        .scorecard-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        @media (max-width: 768px) {
            .scorecard-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .scorecard-item {
            text-align: center;
            padding: 1rem;
            background: var(--gray-100);
            border-radius: 8px;
        }

        .scorecard-item input {
            width: 100%;
            padding: 0.5rem;
            border: 1px solid var(--gray-300);
            border-radius: 4px;
            text-align: center;
            font-size: 1.25rem;
            font-weight: 600;
            margin-top: 0.5rem;
        }

        .scorecard-label {
            font-size: 0.75rem;
            color: var(--gray-500);
            text-transform: uppercase;
        }

        /* Quarter targets */
        .quarter-card {
            text-align: center;
            padding: 1.5rem;
        }

        .quarter-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--navy);
            margin-bottom: 1rem;
        }

        .quarter-stat {
            margin-bottom: 0.75rem;
        }

        .quarter-stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--brand-primary);
        }

        .quarter-stat-label {
            font-size: 0.75rem;
            color: var(--gray-500);
        }

        /* Seller cards */
        .seller-card {
            padding: 1rem;
            border: 1px solid var(--gray-200);
            border-radius: 8px;
            margin-bottom: 1rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .seller-card:hover {
            border-color: var(--brand-primary);
            box-shadow: var(--shadow-md);
        }

        .seller-card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 0.5rem;
        }

        .seller-name {
            font-weight: 600;
        }

        .seller-community {
            font-size: 0.8125rem;
            color: var(--gray-500);
        }

        .seller-details {
            display: flex;
            gap: 1.5rem;
            font-size: 0.8125rem;
            color: var(--gray-600);
        }

        .seller-detail {
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }

        /* Goals section */
        .goal-card {
            padding: 1.5rem;
            border: 1px solid var(--gray-200);
            border-radius: 8px;
            margin-bottom: 1rem;
        }

        .goal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .goal-title {
            font-weight: 600;
            color: var(--navy);
        }

        .goal-progress {
            margin-top: 1rem;
        }

        .goal-progress-header {
            display: flex;
            justify-content: space-between;
            font-size: 0.8125rem;
            margin-bottom: 0.5rem;
        }

        /* Inline edit */
        .editable {
            cursor: pointer;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            transition: background 0.2s;
        }

        .editable:hover {
            background: var(--gray-100);
        }

        /* Print view */
        .print-only {
            display: none;
        }

        @media print {
            .print-only {
                display: block;
            }
            .no-print {
                display: none;
            }
        }

        /* Role-based visibility - hidden by default, shown via JS */
        .admin-only {
            display: none;
        }

        .agent-visible {
            display: none;
        }

        body.role-admin .admin-only {
            display: flex;
        }

        body.role-admin .agent-visible {
            display: none;
        }

        body.role-agent .agent-visible {
            display: flex;
        }

        body.role-ops .agent-visible {
            display: none;
        }

        /* Revenue tracking card */
        .revenue-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1rem;
        }

        @media (max-width: 768px) {
            .revenue-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .revenue-item {
            text-align: center;
            padding: 1rem;
            background: var(--gray-100);
            border-radius: 8px;
        }

        .revenue-item.highlight {
            background: var(--brand-primary);
            color: var(--navy-dark);
        }

        .revenue-item .label {
            font-size: 0.75rem;
            text-transform: uppercase;
            color: var(--gray-500);
            margin-bottom: 0.5rem;
        }

        .revenue-item.highlight .label {
            color: var(--navy-dark);
            opacity: 0.8;
        }

        .revenue-item .value {
            font-size: 1.5rem;
            font-weight: 700;
            font-family: 'Montserrat', sans-serif;
        }

        /* ==========================================
           ACCESSIBILITY UTILITIES
           ========================================== */

        /* Screen reader only - visually hidden but accessible */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        /* Enhanced focus indicators for keyboard navigation */
        :focus-visible {
            outline: 3px solid var(--brand-primary);
            outline-offset: 2px;
        }

        /* Remove default focus for mouse users, keep for keyboard */
        :focus:not(:focus-visible) {
            outline: none;
        }

        /* Ensure buttons and interactive elements have visible focus */
        .btn:focus-visible,
        .nav-item:focus-visible,
        .stage-btn:focus-visible,
        .type-btn:focus-visible,
        .closing-range-btn:focus-visible,
        .logout-btn:focus-visible,
        .modal-close:focus-visible,
        .checklist-checkbox:focus-visible {
            outline: 3px solid var(--brand-primary);
            outline-offset: 2px;
            box-shadow: 0 0 0 6px rgba(0, 168, 225, 0.2);
        }

        /* Skip to main content link (hidden until focused) */
        .skip-link {
            position: absolute;
            top: -100px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--navy);
            color: var(--brand-primary);
            padding: 1rem 2rem;
            z-index: 1001;
            border-radius: 0 0 8px 8px;
            text-decoration: none;
            font-weight: 600;
            transition: top 0.2s;
        }

        .skip-link:focus {
            top: 0;
        }

        /* Contact aging indicators with icons for colorblind support */
        .badge-success::before {
            content: "✓ ";
        }
        .badge-warning::before {
            content: "⏱ ";
        }
        .badge-danger::before {
            content: "⚠ ";
        }

        /* Progress bar accessibility */
        .progress-bar[role="progressbar"] {
            position: relative;
        }

        /* ==========================================
           MOBILE NAVIGATION
           ========================================== */

        /* Hamburger button */
        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            color: var(--white);
            cursor: pointer;
            padding: 0.5rem;
            margin-left: auto;
        }

        .hamburger-icon {
            display: block;
            width: 24px;
            height: 2px;
            background: currentColor;
            position: relative;
            transition: background 0.2s;
        }

        .hamburger-icon::before,
        .hamburger-icon::after {
            content: '';
            position: absolute;
            width: 24px;
            height: 2px;
            background: currentColor;
            left: 0;
            transition: transform 0.2s;
        }

        .hamburger-icon::before { top: -7px; }
        .hamburger-icon::after { top: 7px; }

        /* Hamburger to X animation */
        .mobile-menu-btn.active .hamburger-icon {
            background: transparent;
        }

        .mobile-menu-btn.active .hamburger-icon::before {
            transform: rotate(45deg) translate(5px, 5px);
        }

        .mobile-menu-btn.active .hamburger-icon::after {
            transform: rotate(-45deg) translate(5px, -5px);
        }

        /* Mobile navigation overlay */
        .mobile-nav-overlay {
            display: none;
            position: fixed;
            top: 70px;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 99;
        }

        .mobile-nav-overlay.active {
            display: block;
        }

        .mobile-nav {
            position: fixed;
            top: 70px;
            left: -280px;
            width: 280px;
            height: calc(100vh - 70px);
            background: var(--white);
            box-shadow: var(--shadow-xl);
            z-index: 100;
            transition: left 0.3s ease;
            overflow-y: auto;
        }

        .mobile-nav.active {
            left: 0;
        }

        .mobile-nav-header {
            padding: 1.5rem;
            background: var(--navy);
            color: var(--white);
        }

        .mobile-nav-user {
            font-weight: 600;
        }

        .mobile-nav-role {
            font-size: 0.75rem;
            color: var(--brand-primary);
            text-transform: uppercase;
        }

        .mobile-nav-items {
            padding: 1rem 0;
        }

        .mobile-nav-item {
            display: block;
            width: 100%;
            padding: 1rem 1.5rem;
            text-align: left;
            background: none;
            border: none;
            border-left: 3px solid transparent;
            font-size: 1rem;
            color: var(--gray-600);
            cursor: pointer;
            transition: all 0.2s;
        }

        .mobile-nav-item:hover {
            background: var(--gray-100);
            color: var(--navy);
        }

        .mobile-nav-item.active {
            background: var(--brand-primary-light);
            border-left-color: var(--brand-primary);
            color: var(--navy);
            font-weight: 600;
        }

        .mobile-nav-item.hidden {
            display: none;
        }

        /* Mobile breakpoint */
        @media (max-width: 768px) {
            .mobile-menu-btn {
                display: block;
            }

            .app-nav {
                display: none;
            }

            .header-inner {
                padding: 0;
            }

            .header-user {
                display: none;
            }

            .header-brand {
                flex: 1;
            }
        }

        /* Responsive tables - card view on mobile */
        @media (max-width: 768px) {
            .table-wrapper {
                overflow-x: visible;
            }

            /* Pipeline table cards */
            #pipeline-table tr {
                display: block;
                background: var(--white);
                border: 1px solid var(--gray-200);
                border-radius: 8px;
                margin-bottom: 1rem;
                padding: 1rem;
            }

            #pipeline-table tr:hover {
                background: var(--white);
            }

            #pipeline-table thead {
                display: none;
            }

            #pipeline-table td {
                display: flex;
                justify-content: space-between;
                align-items: center;
                padding: 0.5rem 0;
                border-bottom: 1px solid var(--gray-100);
            }

            #pipeline-table td:last-child {
                border-bottom: none;
                padding-top: 1rem;
                justify-content: flex-start;
                gap: 0.5rem;
            }

            #pipeline-table td::before {
                content: attr(data-label);
                font-weight: 600;
                font-size: 0.75rem;
                color: var(--gray-500);
                text-transform: uppercase;
            }
        }

        /* Touch target improvements */
        @media (pointer: coarse) {
            .btn,
            .nav-item,
            .mobile-nav-item,
            .stage-btn,
            .type-btn,
            .closing-range-btn,
            .checklist-checkbox {
                min-height: 44px;
                min-width: 44px;
            }

            .btn {
                padding: 0.75rem 1.25rem;
            }
        }

        /* Phone-specific styles */
        @media (max-width: 480px) {
            .header-logo {
                font-size: 1.25rem;
            }

            .header-title {
                display: none;
            }

            .header-divider {
                display: none;
            }

            .metrics-grid {
                grid-template-columns: 1fr;
            }

            .scorecard-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .page-header h1 {
                font-size: 1.5rem;
            }

            .card-body {
                padding: 1rem;
            }
        }

        /* ==========================================
           SOCIAL MEDIA SECTION - Colorful Platform Styles
           ========================================== */

        /* Platform Colors */
        :root {
            --instagram-gradient: linear-gradient(45deg, #f09433 0%, #e6683c 25%, #dc2743 50%, #cc2366 75%, #bc1888 100%);
            --facebook-blue: #1877F2;
            --linkedin-blue: #0A66C2;
            --twitter-black: #000000;
            --tiktok-gradient: linear-gradient(135deg, #00f2ea 0%, #ff0050 100%);
        }

        .social-media-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .social-filters {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .social-filter-btn {
            padding: 0.5rem 1rem;
            border: 2px solid var(--gray-300);
            background: white;
            border-radius: 25px;
            font-size: 0.8125rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .social-filter-btn:hover {
            border-color: var(--brand-primary);
            color: var(--brand-primary);
        }

        .social-filter-btn.active {
            background: var(--brand-primary);
            border-color: var(--brand-primary);
            color: white;
        }

        .social-filter-btn.instagram.active {
            background: #E4405F;
            border-color: #E4405F;
        }

        .social-filter-btn.facebook.active {
            background: var(--facebook-blue);
            border-color: var(--facebook-blue);
        }

        .social-filter-btn.linkedin.active {
            background: var(--linkedin-blue);
            border-color: var(--linkedin-blue);
        }

        .social-filter-btn.twitter.active {
            background: var(--twitter-black);
            border-color: var(--twitter-black);
        }

        .social-filter-btn.tiktok.active {
            background: #000;
            border-color: #00f2ea;
        }

        .social-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .social-stat-card {
            background: white;
            border-radius: 12px;
            padding: 1.25rem;
            text-align: center;
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--gray-200);
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .social-stat-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .social-stat-card.draft { border-top: 4px solid #F59E0B; }
        .social-stat-card.approved { border-top: 4px solid var(--brand-primary); }
        .social-stat-card.posted { border-top: 4px solid var(--success); }

        .social-stat-number {
            font-size: 2rem;
            font-weight: 700;
            font-family: 'Montserrat', sans-serif;
        }

        .social-stat-card.draft .social-stat-number { color: #F59E0B; }
        .social-stat-card.approved .social-stat-number { color: var(--brand-primary); }
        .social-stat-card.posted .social-stat-number { color: var(--success); }

        .social-stat-label {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--gray-500);
            margin-top: 0.25rem;
        }

        .social-posts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 1.5rem;
        }

        .social-post-card {
            background: white;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: var(--shadow-md);
            transition: transform 0.2s, box-shadow 0.2s;
            border: 1px solid var(--gray-200);
        }

        .social-post-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
        }

        .social-post-header {
            padding: 1rem 1.25rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            color: white;
            font-weight: 600;
            font-size: 0.875rem;
        }

        .social-post-header.instagram { background: linear-gradient(45deg, #f09433 0%, #e6683c 25%, #dc2743 50%, #cc2366 75%, #bc1888 100%); }
        .social-post-header.facebook { background: var(--facebook-blue); }
        .social-post-header.linkedin { background: var(--linkedin-blue); }
        .social-post-header.twitter { background: var(--twitter-black); }
        .social-post-header.tiktok { background: linear-gradient(135deg, #00f2ea 0%, #ff0050 100%); }

        .social-platform-icon {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .social-platform-icon svg {
            width: 20px;
            height: 20px;
            fill: currentColor;
        }

        .social-post-status {
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.6875rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            font-weight: 600;
        }

        .social-post-status.draft {
            background: rgba(255,255,255,0.25);
            color: white;
        }

        .social-post-status.approved {
            background: white;
            color: var(--brand-primary);
        }

        .social-post-status.posted {
            background: var(--success);
            color: white;
        }

        .social-post-body {
            padding: 1.25rem;
        }

        .social-post-content {
            font-size: 0.9375rem;
            line-height: 1.6;
            color: var(--gray-700);
            margin-bottom: 1rem;
            white-space: pre-wrap;
        }

        .social-post-topic {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            background: var(--gray-100);
            border-radius: 20px;
            font-size: 0.75rem;
            color: var(--gray-600);
            margin-bottom: 1rem;
        }

        .social-post-topic.real-estate { background: #DBEAFE; color: #1E40AF; }
        .social-post-topic.ai { background: #F3E8FF; color: #7C3AED; }
        .social-post-topic.douglas-elliman { background: #FEE2E2; color: #DC2626; }
        .social-post-topic.market-update { background: #D1FAE5; color: #059669; }
        .social-post-topic.personal { background: #FEF3C7; color: #D97706; }

        .social-post-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 1rem;
            border-top: 1px solid var(--gray-200);
            font-size: 0.75rem;
            color: var(--gray-500);
        }

        .social-post-actions {
            display: flex;
            gap: 0.5rem;
        }

        .social-post-actions button {
            padding: 0.375rem 0.75rem;
            border: 1px solid var(--gray-300);
            background: white;
            border-radius: 6px;
            font-size: 0.75rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .social-post-actions button:hover {
            border-color: var(--brand-primary);
            color: var(--brand-primary);
        }

        .social-post-actions button.approve {
            background: var(--brand-primary);
            border-color: var(--brand-primary);
            color: white;
        }

        .social-post-actions button.approve:hover {
            background: var(--brand-primary-dark);
        }

        .social-post-actions button.post {
            background: var(--success);
            border-color: var(--success);
            color: white;
        }

        .add-post-btn {
            background: linear-gradient(135deg, var(--brand-primary) 0%, #0077b6 100%);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 25px;
            font-weight: 600;
            font-size: 0.875rem;
            cursor: pointer;
            transition: all 0.2s;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            box-shadow: 0 4px 15px rgba(0, 168, 225, 0.3);
        }

        .add-post-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 168, 225, 0.4);
        }

        .generate-btn {
            background: linear-gradient(135deg, #7C3AED 0%, #A855F7 100%);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 25px;
            font-weight: 600;
            font-size: 0.875rem;
            cursor: pointer;
            transition: all 0.2s;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            box-shadow: 0 4px 15px rgba(124, 58, 237, 0.3);
        }

        .generate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(124, 58, 237, 0.4);
        }

        .social-empty-state {
            text-align: center;
            padding: 4rem 2rem;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 16px;
            border: 2px dashed var(--gray-300);
        }

        .social-empty-state h3 {
            color: var(--gray-600);
            margin-bottom: 0.5rem;
        }

        .social-empty-state p {
            color: var(--gray-500);
            margin-bottom: 1.5rem;
        }

        /* Social Media Modal Enhancements */
        .platform-select-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .platform-select-btn {
            padding: 0.75rem;
            border: 2px solid var(--gray-300);
            background: white;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.25rem;
            font-size: 0.6875rem;
            font-weight: 500;
        }

        .platform-select-btn:hover {
            border-color: var(--gray-400);
        }

        .platform-select-btn.selected.instagram { border-color: #E4405F; background: #FDF2F8; }
        .platform-select-btn.selected.facebook { border-color: var(--facebook-blue); background: #EFF6FF; }
        .platform-select-btn.selected.linkedin { border-color: var(--linkedin-blue); background: #EFF6FF; }
        .platform-select-btn.selected.twitter { border-color: var(--twitter-black); background: #F3F4F6; }
        .platform-select-btn.selected.tiktok { border-color: #00f2ea; background: #F0FDFA; }

        .topic-select-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .topic-select-btn {
            padding: 0.5rem 1rem;
            border: 2px solid var(--gray-300);
            background: white;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 0.75rem;
            font-weight: 500;
        }

        .topic-select-btn.selected {
            border-color: var(--brand-primary);
            background: var(--brand-primary-light);
            color: var(--brand-primary);
        }

        /* Email Campaign Styles */
        .email-campaign-card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            overflow: hidden;
            transition: all 0.2s;
            margin-bottom: 1rem;
        }

        .email-campaign-card:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            transform: translateY(-2px);
        }

        .email-campaign-header {
            padding: 1rem 1.25rem;
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            border-bottom: 1px solid var(--gray-200);
        }

        .email-campaign-header .sender-badge {
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .sender-badge.edmund { background: #DBEAFE; color: #1E40AF; }
        .sender-badge.samantha { background: #FCE7F3; color: #BE185D; }
        .sender-badge.dina { background: #D1FAE5; color: #047857; }

        .email-campaign-body {
            padding: 1.25rem;
        }

        .email-campaign-subject {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--gray-900);
            margin-bottom: 0.5rem;
            cursor: pointer;
        }

        .email-campaign-subject:hover {
            color: var(--brand-primary);
        }

        .email-campaign-meta {
            font-size: 0.8125rem;
            color: var(--gray-500);
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .email-campaign-actions {
            display: flex;
            gap: 0.5rem;
            padding: 0.75rem 1.25rem;
            border-top: 1px solid var(--gray-200);
            background: var(--gray-50);
        }

        .email-campaign-actions button {
            padding: 0.375rem 0.75rem;
            font-size: 0.75rem;
            border-radius: 6px;
            border: 1px solid var(--gray-300);
            background: white;
            cursor: pointer;
            transition: all 0.2s;
        }

        .email-campaign-actions button:hover {
            background: var(--gray-100);
        }

        .email-campaign-actions button.preview {
            background: var(--brand-primary);
            color: white;
            border-color: var(--brand-primary);
        }

        .email-campaign-actions button.preview:hover {
            background: var(--brand-primary-dark);
        }

        @media (max-width: 768px) {
            .social-posts-grid {
                grid-template-columns: 1fr;
            }

            .platform-select-grid {
                grid-template-columns: repeat(3, 1fr);
            }

            .social-media-header {
                flex-direction: column;
                align-items: stretch;
            }

            .social-filters {
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <!-- Skip to main content link for keyboard users -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <!-- Login Screen -->
    <div id="login-screen" role="dialog" aria-labelledby="login-title" aria-modal="true">
        <div class="login-container">
            <div class="login-logo">Edmund Bogen</div>
            <div class="login-subtitle">Luxury Real Estate</div>
            <div class="login-box">
                <h2 id="login-title">2026 Operating Plan</h2>
                <form id="login-form">
                    <div class="form-group">
                        <label>Team Member</label>
                        <select id="login-user" required>
                            <option value="">Select your name...</option>
                            <option value="edmund">Edmund Bogen (Admin)</option>
                            <option value="dina">Dina (Agent)</option>
                            <option value="samantha">Samantha (Agent)</option>
                            <option value="nicole">Nicole (Operations)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Password</label>
                        <input type="password" id="login-password" placeholder="Enter password" required>
                    </div>
                    <button type="submit" class="btn btn-primary">Sign In</button>
                </form>
                <p class="login-error" id="login-error">Invalid credentials. Please try again.</p>
            </div>
        </div>
    </div>

    <!-- Main App -->
    <div id="app">
        <!-- Header -->
        <header class="app-header">
            <div class="header-inner">
                <div class="header-brand">
                    <span class="header-logo">Edmund Bogen</span>
                    <span class="header-divider"></span>
                    <span class="header-title">2026 Operating Plan</span>
                </div>
                <div class="header-user">
                    <div style="display: flex; align-items: center; gap: 0.5rem; margin-right: 1rem;">
                        <div id="sync-status" role="status" aria-live="polite" aria-label="Sync status" style="font-size: 0.75rem;"><span style="color: var(--gray-500);">Offline</span><span class="sr-only"> - Data saved locally only</span></div>
                        <button id="sync-now-btn" onclick="syncNow()" style="font-size: 0.7rem; padding: 0.25rem 0.5rem; background: var(--navy-light); color: white; border: none; border-radius: 4px; cursor: pointer;">Sync Now</button>
                        <button onclick="exportData()" style="font-size: 0.7rem; padding: 0.25rem 0.5rem; background: var(--brand-primary-dark); color: white; border: none; border-radius: 4px; cursor: pointer;">Export</button>
                    </div>
                    <div class="user-info">
                        <div class="user-name" id="current-user-name">Edmund Bogen</div>
                        <div class="user-role" id="current-user-role">Admin</div>
                    </div>
                    <button class="logout-btn" onclick="logout()">Sign Out</button>
                </div>
                <!-- Mobile hamburger button -->
                <button class="mobile-menu-btn" id="mobile-menu-btn" aria-label="Open navigation menu" aria-expanded="false" onclick="toggleMobileMenu()">
                    <span class="hamburger-icon"></span>
                </button>
            </div>
        </header>

        <!-- Mobile Navigation -->
        <div class="mobile-nav-overlay" id="mobile-nav-overlay" onclick="closeMobileMenu()"></div>
        <nav class="mobile-nav" id="mobile-nav" aria-label="Mobile navigation">
            <div class="mobile-nav-header">
                <div class="mobile-nav-user" id="mobile-user-name">Edmund Bogen</div>
                <div class="mobile-nav-role" id="mobile-user-role">Admin</div>
            </div>
            <div class="mobile-nav-items">
                <button class="mobile-nav-item active" data-page="dashboard">Dashboard</button>
                <button class="mobile-nav-item" data-page="pipeline">Pipeline</button>
                <button class="mobile-nav-item" data-page="contacts">Contacts</button>
                <button class="mobile-nav-item" data-page="lead-sources">Lead Sources</button>
                <button class="mobile-nav-item" data-page="calculator">Deal Calculator</button>
                <button class="mobile-nav-item" data-page="quarter-plan">Quarter Plan</button>
                <button class="mobile-nav-item" data-page="team-goals">Team Goals</button>
                <button class="mobile-nav-item" data-page="social-media">Social Media</button>
                <button class="mobile-nav-item" data-page="email-campaigns">Email Campaigns</button>
                <button class="mobile-nav-item" data-page="ops" id="mobile-nav-ops">Ops Execution</button>
                <button class="mobile-nav-item" data-page="settings" id="mobile-nav-settings">Settings</button>
            </div>
            <div style="padding: 1rem 1.5rem; border-top: 1px solid var(--gray-200);">
                <button class="btn btn-outline" style="width: 100%;" onclick="logout()">Sign Out</button>
            </div>
        </nav>

        <!-- Navigation -->
        <nav class="app-nav" aria-label="Main navigation">
            <div class="nav-inner" role="tablist" aria-label="Page sections">
                <button class="nav-item active" data-page="dashboard" role="tab" aria-selected="true" aria-controls="page-dashboard">Dashboard</button>
                <button class="nav-item" data-page="pipeline" role="tab" aria-selected="false" aria-controls="page-pipeline">Pipeline</button>
                <button class="nav-item" data-page="contacts" role="tab" aria-selected="false" aria-controls="page-contacts">Contacts</button>
                <button class="nav-item" data-page="lead-sources" role="tab" aria-selected="false" aria-controls="page-lead-sources">Lead Sources</button>
                <button class="nav-item" data-page="calculator" role="tab" aria-selected="false" aria-controls="page-calculator">Deal Calculator</button>
                <button class="nav-item" data-page="quarter-plan" role="tab" aria-selected="false" aria-controls="page-quarter-plan">Quarter Plan</button>
                <button class="nav-item" data-page="team-goals" role="tab" aria-selected="false" aria-controls="page-team-goals">Team Goals</button>
                <button class="nav-item" data-page="social-media" role="tab" aria-selected="false" aria-controls="page-social-media">Social Media</button>
                <button class="nav-item" data-page="email-campaigns" role="tab" aria-selected="false" aria-controls="page-email-campaigns">Email Campaigns</button>
                <button class="nav-item" data-page="ops" id="nav-ops" role="tab" aria-selected="false" aria-controls="page-ops">Ops Execution</button>
                <button class="nav-item" data-page="settings" id="nav-settings" role="tab" aria-selected="false" aria-controls="page-settings">Settings</button>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main-content" id="main-content">
            <!-- Dashboard Page -->
            <section class="page-content active" id="page-dashboard" role="tabpanel" aria-labelledby="dashboard-heading">
                <div class="page-header">
                    <h1 id="dashboard-heading">Executive Dashboard</h1>
                    <p>60-day forecast and key performance indicators</p>
                </div>

                <!-- Stop-Loss Alerts -->
                <div id="stop-loss-alerts"></div>

                <!-- Key Metrics -->
                <div class="metrics-grid">
                    <div class="metric-card">
                        <div class="metric-label">60-Day Forecast (Net to Edmund)</div>
                        <div class="metric-value neutral" id="metric-60day-forecast">$0</div>
                        <div class="metric-subtitle">Probability-weighted pipeline</div>
                        <div class="metric-target">Target: $70,000 minimum</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Active $2M+ Sellers</div>
                        <div class="metric-value neutral" id="metric-active-sellers">0</div>
                        <div class="metric-subtitle" id="metric-sellers-status">Target: 20-22</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Deals Closed YTD</div>
                        <div class="metric-value neutral" id="metric-deals-ytd">0</div>
                        <div class="metric-subtitle" id="metric-deals-target">Target: 14 total</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Net Income YTD</div>
                        <div class="metric-value positive" id="metric-net-ytd">$0</div>
                        <div class="metric-subtitle">Annual floor: $300,000</div>
                    </div>
                </div>

                <!-- Floor Progress -->
                <div class="card" style="margin-bottom: 1.5rem;">
                    <div class="card-header">
                        <h3>Annual Floor Progress</h3>
                        <span id="floor-progress-pct">0%</span>
                    </div>
                    <div class="card-body">
                        <div class="progress-bar" style="height: 12px; margin-bottom: 1rem;">
                            <div class="progress-fill" id="floor-progress-bar" style="width: 0%;"></div>
                        </div>
                        <div style="display: flex; justify-content: space-between; font-size: 0.875rem; color: var(--gray-500);">
                            <span>$0</span>
                            <span>$300,000 Floor</span>
                            <span>$402,000 Target</span>
                        </div>
                    </div>
                </div>

                <!-- Revenue Tracking - Admin sees all, others see only their own -->
                <div class="card admin-only" style="margin-bottom: 1.5rem;" id="revenue-card-admin">
                    <div class="card-header">
                        <h3>Team Revenue YTD</h3>
                        <span class="badge badge-success">From Closed Deals</span>
                    </div>
                    <div class="card-body">
                        <div class="revenue-grid">
                            <div class="revenue-item highlight">
                                <div class="label">Edmund Net</div>
                                <div class="value" id="revenue-edmund">$0</div>
                            </div>
                            <div class="revenue-item">
                                <div class="label">Dina Net</div>
                                <div class="value" id="revenue-dina">$0</div>
                            </div>
                            <div class="revenue-item">
                                <div class="label">Samantha Net</div>
                                <div class="value" id="revenue-samantha">$0</div>
                            </div>
                            <div class="revenue-item">
                                <div class="label">Nicole Bonuses</div>
                                <div class="value" id="revenue-nicole">$0</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Agent's own revenue - visible only to agents -->
                <div class="card agent-visible" style="margin-bottom: 1.5rem;" id="revenue-card-agent">
                    <div class="card-header">
                        <h3>Your Revenue YTD</h3>
                        <span class="badge badge-success">From Closed Deals</span>
                    </div>
                    <div class="card-body">
                        <div class="metric-card success" style="max-width: 300px; margin: 0 auto;">
                            <div class="metric-label">Your Net Commission</div>
                            <div class="metric-value positive" id="revenue-my-net">$0</div>
                            <div class="metric-subtitle">Keep up the great work!</div>
                        </div>
                    </div>
                </div>

                <!-- Dashboard Grid -->
                <div class="grid-2">
                    <!-- Upcoming Closings -->
                    <div class="card">
                        <div class="card-header">
                            <h3>Upcoming Closings</h3>
                        </div>
                        <div class="card-body">
                            <!-- Time Range Filters -->
                            <div style="display: flex; gap: 0.5rem; margin-bottom: 1rem; flex-wrap: wrap;">
                                <button class="btn btn-outline closing-range-btn active" data-range="60" onclick="filterClosingRange(60)">60 Days</button>
                                <button class="btn btn-outline closing-range-btn" data-range="90" onclick="filterClosingRange(90)">90 Days</button>
                                <button class="btn btn-outline closing-range-btn" data-range="180" onclick="filterClosingRange(180)">6 Months</button>
                                <button class="btn btn-outline closing-range-btn" data-range="365" onclick="filterClosingRange(365)">1 Year</button>
                                <button class="btn btn-outline closing-range-btn" data-range="all" onclick="filterClosingRange('all')">All Future</button>
                            </div>
                            <div class="table-wrapper">
                                <table>
                                    <caption class="sr-only">Upcoming closings with client details, prices, and probabilities</caption>
                                    <thead>
                                        <tr>
                                            <th>Type</th>
                                            <th>Client</th>
                                            <th>Price</th>
                                            <th>Net</th>
                                            <th>Prob</th>
                                        </tr>
                                    </thead>
                                    <tbody id="upcoming-closings-table">
                                        <tr>
                                            <td colspan="5" style="text-align: center; color: var(--gray-400);">No upcoming closings</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- Weekly Activity -->
                    <div class="card">
                        <div class="card-header">
                            <h3>This Week's Activity</h3>
                        </div>
                        <div class="card-body">
                            <div class="scorecard-grid" style="grid-template-columns: repeat(4, 1fr);">
                                <div class="scorecard-item">
                                    <div class="scorecard-label">Seller Calls</div>
                                    <div style="font-size: 1.5rem; font-weight: 700;" id="week-seller-calls">0</div>
                                    <div style="font-size: 0.75rem; color: var(--gray-400);">Target: 2</div>
                                </div>
                                <div class="scorecard-item">
                                    <div class="scorecard-label">Pricing Convos</div>
                                    <div style="font-size: 1.5rem; font-weight: 700;" id="week-pricing-convos">0</div>
                                    <div style="font-size: 0.75rem; color: var(--gray-400);">Target: 1</div>
                                </div>
                                <div class="scorecard-item">
                                    <div class="scorecard-label">Listing Appts</div>
                                    <div style="font-size: 1.5rem; font-weight: 700;" id="week-listing-appts">0</div>
                                    <div style="font-size: 0.75rem; color: var(--gray-400);">Target: 0.5</div>
                                </div>
                                <div class="scorecard-item">
                                    <div class="scorecard-label">Seller Touches</div>
                                    <div style="font-size: 1.5rem; font-weight: 700;" id="week-seller-touches">0</div>
                                    <div style="font-size: 0.75rem; color: var(--gray-400);">Target: 2.5</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Pipeline Page -->
            <section class="page-content" id="page-pipeline" role="tabpanel" aria-labelledby="pipeline-heading">
                <div class="page-header">
                    <h1 id="pipeline-heading">Pipeline Management</h1>
                    <p>Track active clients and deal stages</p>
                </div>

                <!-- Client Type Filter -->
                <div class="pipeline-stages" style="margin-bottom: 1rem;">
                    <button class="stage-btn type-btn active" data-type="all">All Clients <span class="stage-count" id="count-type-all">0</span></button>
                    <button class="stage-btn type-btn" data-type="seller" style="border-color: var(--info); color: var(--info);">Sellers <span class="stage-count" id="count-type-seller">0</span></button>
                    <button class="stage-btn type-btn" data-type="buyer" style="border-color: var(--success); color: var(--success);">Buyers <span class="stage-count" id="count-type-buyer">0</span></button>
                </div>

                <!-- Pipeline Stages Filter -->
                <div class="pipeline-stages">
                    <button class="stage-btn active" data-stage="all">All Stages <span class="stage-count" id="count-all">0</span></button>
                    <button class="stage-btn" data-stage="prospect">Prospect <span class="stage-count" id="count-prospect">0</span></button>
                    <button class="stage-btn" data-stage="active">Active <span class="stage-count" id="count-active">0</span></button>
                    <button class="stage-btn" data-stage="listing-meeting">Listing Mtg <span class="stage-count" id="count-listing-meeting">0</span></button>
                    <button class="stage-btn" data-stage="showing">Showing <span class="stage-count" id="count-showing">0</span></button>
                    <button class="stage-btn" data-stage="listed">Listed <span class="stage-count" id="count-listed">0</span></button>
                    <button class="stage-btn" data-stage="under-contract">Under Contract <span class="stage-count" id="count-under-contract">0</span></button>
                    <button class="stage-btn" data-stage="closed">Closed <span class="stage-count" id="count-closed">0</span></button>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3>Clients & Deals</h3>
                        <button class="btn btn-primary" onclick="openAddSellerModal()">+ Add Client</button>
                    </div>
                    <div class="card-body">
                        <div class="table-wrapper">
                            <table>
                                <caption class="sr-only">Pipeline clients with contact status, stage, and actions</caption>
                                <thead>
                                    <tr>
                                        <th>Type</th>
                                        <th>Name / Property</th>
                                        <th>Community</th>
                                        <th>Value/Budget</th>
                                        <th>Timing</th>
                                        <th>Originator</th>
                                        <th>Last Touch</th>
                                        <th>Stage</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="pipeline-table">
                                    <tr>
                                        <td colspan="9" style="text-align: center; color: var(--gray-400);">No clients in pipeline</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Contacts Page -->
            <section class="page-content" id="page-contacts" role="tabpanel" aria-labelledby="contacts-heading">
                <div class="page-header">
                    <h1 id="contacts-heading">Contacts Directory</h1>
                    <p>All client contact information in one place</p>
                </div>

                <!-- Contact Stats -->
                <div class="metrics-grid" style="grid-template-columns: repeat(4, 1fr); margin-bottom: 1.5rem;">
                    <div class="metric-card">
                        <div class="metric-label">Total Contacts</div>
                        <div class="metric-value neutral" id="contacts-total">0</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">With Phone</div>
                        <div class="metric-value positive" id="contacts-with-phone">0</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">With Email</div>
                        <div class="metric-value positive" id="contacts-with-email">0</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">With Spouse Info</div>
                        <div class="metric-value neutral" id="contacts-with-spouse">0</div>
                    </div>
                </div>

                <!-- Search and Export -->
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; flex-wrap: wrap; gap: 1rem;">
                    <div style="display: flex; gap: 0.5rem; align-items: center;">
                        <input type="text" id="contacts-search" placeholder="Search contacts..." style="padding: 0.5rem 1rem; border: 1px solid var(--gray-300); border-radius: 6px; min-width: 250px;">
                        <select id="contacts-filter" style="padding: 0.5rem 1rem; border: 1px solid var(--gray-300); border-radius: 6px;">
                            <option value="all">All Contacts</option>
                            <option value="seller">Sellers</option>
                            <option value="buyer">Buyers</option>
                            <option value="lead-source">Lead Sources</option>
                            <option value="has-phone">Has Phone</option>
                            <option value="no-phone">Missing Phone</option>
                            <option value="has-spouse">Has Spouse Info</option>
                        </select>
                    </div>
                    <div style="display: flex; gap: 0.5rem;">
                        <button class="btn btn-secondary" onclick="exportContacts()">Export CSV</button>
                        <button class="btn btn-primary" onclick="openAddSellerModal()">+ Add Contact</button>
                    </div>
                </div>

                <!-- Contacts Table -->
                <div class="card">
                    <div class="card-body" style="overflow-x: auto;">
                        <table style="width: 100%; border-collapse: collapse; font-size: 0.875rem;">
                            <thead>
                                <tr style="background: var(--gray-100); text-transform: uppercase; font-size: 0.75rem; letter-spacing: 0.05em;">
                                    <th style="padding: 0.75rem; text-align: left; border-bottom: 2px solid var(--gray-200);">Name</th>
                                    <th style="padding: 0.75rem; text-align: left; border-bottom: 2px solid var(--gray-200);">Type</th>
                                    <th style="padding: 0.75rem; text-align: left; border-bottom: 2px solid var(--gray-200);">Phone</th>
                                    <th style="padding: 0.75rem; text-align: left; border-bottom: 2px solid var(--gray-200);">Email</th>
                                    <th style="padding: 0.75rem; text-align: left; border-bottom: 2px solid var(--gray-200);">Spouse/Partner</th>
                                    <th style="padding: 0.75rem; text-align: left; border-bottom: 2px solid var(--gray-200);">Community</th>
                                    <th style="padding: 0.75rem; text-align: center; border-bottom: 2px solid var(--gray-200);">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="contacts-table-body">
                                <!-- Contacts will be rendered here by JavaScript -->
                            </tbody>
                        </table>
                        <div id="contacts-empty" style="display: none; text-align: center; padding: 3rem; color: var(--gray-400);">
                            No contacts found. Add clients in the Pipeline tab.
                        </div>
                    </div>
                </div>
            </section>

            <!-- Lead Sources Page -->
            <section class="page-content" id="page-lead-sources" role="tabpanel" aria-labelledby="lead-sources-heading">
                <div class="page-header">
                    <h1 id="lead-sources-heading">Lead Sources</h1>
                    <p>Track referral partners and centers of influence</p>
                </div>

                <!-- Lead Source Metrics -->
                <div class="metrics-grid" style="grid-template-columns: repeat(4, 1fr);">
                    <div class="metric-card" id="ls-total-card" style="cursor: help;">
                        <div class="metric-label">Total Lead Sources</div>
                        <div class="metric-value neutral" id="ls-total-count">0</div>
                    </div>
                    <div class="metric-card" id="ls-leads-card" style="cursor: help;">
                        <div class="metric-label">Leads Received</div>
                        <div class="metric-value neutral" id="ls-leads-count">0</div>
                        <div class="metric-subtitle">All time</div>
                    </div>
                    <div class="metric-card" id="ls-closed-card" style="cursor: help;">
                        <div class="metric-label">Closed from Referrals</div>
                        <div class="metric-value positive" id="ls-closed-count">0</div>
                        <div class="metric-subtitle">Deals closed</div>
                    </div>
                    <div class="metric-card warning" id="ls-need-touch-card" style="cursor: help;">
                        <div class="metric-label">Need Touch (30+ Days)</div>
                        <div class="metric-value warning" id="ls-need-touch">0</div>
                        <div class="metric-subtitle">Follow up soon</div>
                    </div>
                </div>

                <!-- Lead Sources Table -->
                <div class="card">
                    <div class="card-header">
                        <h3>Referral Partners</h3>
                        <button class="btn btn-primary" onclick="openAddLeadSourceModal()">+ Add Lead Source</button>
                    </div>
                    <div class="card-body">
                        <div class="table-wrapper">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Name</th>
                                        <th>Type</th>
                                        <th>Company</th>
                                        <th>Leads Sent</th>
                                        <th>Closed Deals</th>
                                        <th>Last Touch</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="lead-sources-table">
                                    <tr>
                                        <td colspan="7" style="text-align: center; color: var(--gray-400);">No lead sources added yet</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Top Referrers -->
                <div class="card" style="margin-top: 1.5rem;">
                    <div class="card-header">
                        <h3>Top Referrers by Closed Business</h3>
                    </div>
                    <div class="card-body">
                        <div id="top-referrers-list" style="display: flex; flex-direction: column; gap: 0.75rem;">
                            <p style="color: var(--gray-400); text-align: center;">Add lead sources and link clients to see your top referrers</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Deal Calculator Page -->
            <section class="page-content" id="page-calculator" role="tabpanel" aria-labelledby="calculator-heading">
                <div class="page-header">
                    <h1 id="calculator-heading">Deal Calculator</h1>
                    <p>Calculate commission splits and net income per deal</p>
                </div>

                <div class="card">
                    <div class="card-body">
                        <div class="calculator-grid">
                            <div class="calc-inputs">
                                <div class="form-group">
                                    <label>Sale Price</label>
                                    <input type="number" id="calc-price" value="2000000" placeholder="e.g., 2000000">
                                </div>
                                <div class="form-group">
                                    <label>Commission Rate (%)</label>
                                    <input type="number" id="calc-commission" value="5.0" step="0.1" placeholder="e.g., 5.0">
                                </div>
                                <div class="form-group">
                                    <label>Deal Originator</label>
                                    <select id="calc-originator">
                                        <option value="edmund">Edmund-Originated (60% to Edmund)</option>
                                        <option value="agent">Agent-Originated (40% to Edmund)</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Co-Broke with Agent?</label>
                                    <select id="calc-cobroke">
                                        <option value="yes">Yes - Split with Dina/Samantha</option>
                                        <option value="no">No - Edmund Solo</option>
                                    </select>
                                </div>
                                <button class="btn btn-primary" onclick="calculateDeal()">Calculate</button>
                            </div>

                            <div class="calc-result">
                                <h4>Commission Breakdown</h4>
                                <div class="calc-line">
                                    <span class="label">Sale Price</span>
                                    <span class="value" id="result-price">$2,000,000</span>
                                </div>
                                <div class="calc-line">
                                    <span class="label">Gross Commission (<span id="result-rate">5.0</span>%)</span>
                                    <span class="value" id="result-gross">$100,000</span>
                                </div>

                                <!-- Split Details - Admin Only -->
                                <div class="calc-line admin-only">
                                    <span class="label">Edmund's Share (<span id="result-edmund-split">60</span>%)</span>
                                    <span class="value" id="result-edmund-pre">$60,000</span>
                                </div>
                                <div class="calc-line admin-only">
                                    <span class="label">Agent's Share (<span id="result-agent-split">40</span>%)</span>
                                    <span class="value" id="result-agent-pre">$40,000</span>
                                </div>

                                <!-- Brokerage Splits - Admin Only -->
                                <div class="calc-line admin-only" style="border-top: 1px solid rgba(255,255,255,0.2); margin-top: 0.5rem; padding-top: 0.75rem;">
                                    <span class="label">Edmund to Brokerage (<span id="result-edmund-brokerage-pct">20</span>%)</span>
                                    <span class="value" id="result-edmund-post">$48,000</span>
                                </div>
                                <div class="calc-line admin-only">
                                    <span class="label">Agent to Brokerage (<span id="result-agent-brokerage-pct">30</span>%)</span>
                                    <span class="value" id="result-agent-post">$28,000</span>
                                </div>

                                <div class="calc-line admin-only">
                                    <span class="label">Nicole Bonus</span>
                                    <span class="value" id="result-nicole">-$1,000</span>
                                </div>

                                <!-- Net Results -->
                                <div class="calc-line total admin-only">
                                    <span class="label">Net to Edmund</span>
                                    <span class="value highlight" id="result-edmund-net">$47,000</span>
                                </div>

                                <!-- Agent sees only their net -->
                                <div class="calc-line total agent-visible">
                                    <span class="label">Your Net Commission</span>
                                    <span class="value highlight" id="result-agent-net">$28,000</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Quick Reference Table -->
                <div class="card" style="margin-top: 1.5rem;">
                    <div class="card-header">
                        <h3>Quick Reference: Net to Edmund by Price Point</h3>
                    </div>
                    <div class="card-body">
                        <div class="table-wrapper">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Price Point</th>
                                        <th>Gross Commission</th>
                                        <th>Edmund-Originated (60%)</th>
                                        <th>Agent-Originated (40%)</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>$1,000,000</td>
                                        <td>$50,000</td>
                                        <td style="color: var(--success); font-weight: 600;">$23,000</td>
                                        <td>$15,000</td>
                                    </tr>
                                    <tr>
                                        <td>$2,000,000</td>
                                        <td>$100,000</td>
                                        <td style="color: var(--success); font-weight: 600;">$47,000</td>
                                        <td>$31,000</td>
                                    </tr>
                                    <tr>
                                        <td>$3,000,000</td>
                                        <td>$150,000</td>
                                        <td style="color: var(--success); font-weight: 600;">$71,000</td>
                                        <td>$47,000</td>
                                    </tr>
                                    <tr>
                                        <td>$5,000,000</td>
                                        <td>$250,000</td>
                                        <td style="color: var(--success); font-weight: 600;">$119,000</td>
                                        <td>$79,000</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Quarter Plan Page -->
            <section class="page-content" id="page-quarter-plan" role="tabpanel" aria-labelledby="quarter-plan-heading">
                <div class="page-header">
                    <h1 id="quarter-plan-heading">2026 Quarter Plan</h1>
                    <p>Quarterly targets and weekly execution cadence</p>
                </div>

                <!-- Quarterly Targets -->
                <div class="grid-2" style="grid-template-columns: repeat(4, 1fr); margin-bottom: 2rem;">
                    <div class="card quarter-card">
                        <div class="quarter-title">Q1</div>
                        <div class="quarter-stat">
                            <div class="quarter-stat-value">8</div>
                            <div class="quarter-stat-label">New $2M+ Sellers</div>
                        </div>
                        <div class="quarter-stat">
                            <div class="quarter-stat-value">18-20</div>
                            <div class="quarter-stat-label">Active Seller Target</div>
                        </div>
                        <div class="quarter-stat">
                            <div class="quarter-stat-value">0-1</div>
                            <div class="quarter-stat-label">Expected Closings</div>
                        </div>
                    </div>
                    <div class="card quarter-card">
                        <div class="quarter-title">Q2</div>
                        <div class="quarter-stat">
                            <div class="quarter-stat-value">6</div>
                            <div class="quarter-stat-label">New $2M+ Sellers</div>
                        </div>
                        <div class="quarter-stat">
                            <div class="quarter-stat-value">20-22</div>
                            <div class="quarter-stat-label">Active Seller Target</div>
                        </div>
                        <div class="quarter-stat">
                            <div class="quarter-stat-value">2</div>
                            <div class="quarter-stat-label">Expected Closings</div>
                        </div>
                    </div>
                    <div class="card quarter-card">
                        <div class="quarter-title">Q3</div>
                        <div class="quarter-stat">
                            <div class="quarter-stat-value">4</div>
                            <div class="quarter-stat-label">New $2M+ Sellers</div>
                        </div>
                        <div class="quarter-stat">
                            <div class="quarter-stat-value">18-20</div>
                            <div class="quarter-stat-label">Active Seller Target</div>
                        </div>
                        <div class="quarter-stat">
                            <div class="quarter-stat-value">2</div>
                            <div class="quarter-stat-label">Expected Closings</div>
                        </div>
                    </div>
                    <div class="card quarter-card">
                        <div class="quarter-title">Q4</div>
                        <div class="quarter-stat">
                            <div class="quarter-stat-value">4</div>
                            <div class="quarter-stat-label">New $2M+ Sellers</div>
                        </div>
                        <div class="quarter-stat">
                            <div class="quarter-stat-value">20+</div>
                            <div class="quarter-stat-label">Active Seller Target</div>
                        </div>
                        <div class="quarter-stat">
                            <div class="quarter-stat-value">2</div>
                            <div class="quarter-stat-label">Expected Closings</div>
                        </div>
                    </div>
                </div>

                <!-- Weekly Cadence Checklist -->
                <div class="card" style="margin-bottom: 1.5rem;">
                    <div class="card-header">
                        <h3>Weekly Execution Cadence</h3>
                        <span id="week-date-range"></span>
                    </div>
                    <div class="card-body">
                        <ul class="checklist" id="weekly-checklist">
                            <li class="checklist-item">
                                <div class="checklist-checkbox" data-check="seller-convo-1"></div>
                                <span class="checklist-text">Seller conversation #1 (pricing/timing explicit)</span>
                            </li>
                            <li class="checklist-item">
                                <div class="checklist-checkbox" data-check="seller-convo-2"></div>
                                <span class="checklist-text">Seller conversation #2 (pricing/timing explicit)</span>
                            </li>
                            <li class="checklist-item">
                                <div class="checklist-checkbox" data-check="pricing-convo"></div>
                                <span class="checklist-text">Pricing/positioning conversation (explicit numbers)</span>
                            </li>
                            <li class="checklist-item">
                                <div class="checklist-checkbox" data-check="pipeline-review"></div>
                                <span class="checklist-text">Pipeline review - update all active sellers</span>
                            </li>
                            <li class="checklist-item">
                                <div class="checklist-checkbox" data-check="forecast-review"></div>
                                <span class="checklist-text">60-day forecast review</span>
                            </li>
                        </ul>
                    </div>
                </div>

                <!-- Vacation Schedule -->
                <div class="card">
                    <div class="card-header">
                        <h3>2026 Time Off Schedule (6 Weeks)</h3>
                        <button class="btn btn-secondary btn-sm" onclick="openVacationModal()">Edit Schedule</button>
                    </div>
                    <div class="card-body">
                        <div class="table-wrapper">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Period</th>
                                        <th>Dates</th>
                                        <th>Duration</th>
                                        <th>Coverage</th>
                                    </tr>
                                </thead>
                                <tbody id="vacation-table">
                                    <tr>
                                        <td colspan="4" style="text-align: center; color: var(--gray-400);">No vacation scheduled yet</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Team Goals Page -->
            <section class="page-content" id="page-team-goals" role="tabpanel" aria-labelledby="team-goals-heading">
                <div class="page-header">
                    <h1 id="team-goals-heading">Team Goals</h1>
                    <p>Individual 2026 goals and weekly scorecards</p>
                </div>

                <div id="team-goals-container"></div>
            </section>

            <!-- Social Media Page -->
            <section class="page-content" id="page-social-media" role="tabpanel" aria-labelledby="social-media-heading">
                <div class="page-header">
                    <h1 id="social-media-heading">Social Media Content</h1>
                    <p>Draft, approve, and track social posts for all platforms</p>
                </div>

                <!-- Stats Cards -->
                <div class="social-stats">
                    <div class="social-stat-card draft">
                        <div class="social-stat-number" id="social-stat-draft">0</div>
                        <div class="social-stat-label">Drafts</div>
                    </div>
                    <div class="social-stat-card approved">
                        <div class="social-stat-number" id="social-stat-approved">0</div>
                        <div class="social-stat-label">Approved</div>
                    </div>
                    <div class="social-stat-card posted">
                        <div class="social-stat-number" id="social-stat-posted">0</div>
                        <div class="social-stat-label">Posted</div>
                    </div>
                </div>

                <!-- Filters and Actions -->
                <div class="social-media-header">
                    <div class="social-filters">
                        <button class="social-filter-btn active" data-filter="all">All</button>
                        <button class="social-filter-btn instagram" data-filter="instagram">Instagram</button>
                        <button class="social-filter-btn facebook" data-filter="facebook">Facebook</button>
                        <button class="social-filter-btn linkedin" data-filter="linkedin">LinkedIn</button>
                        <button class="social-filter-btn twitter" data-filter="twitter">Twitter/X</button>
                        <button class="social-filter-btn tiktok" data-filter="tiktok">TikTok</button>
                    </div>
                    <div style="display: flex; gap: 0.75rem;">
                        <button class="generate-btn" onclick="openAIGenerateModal()" style="background: linear-gradient(135deg, #10a37f, #0d8c6d);">✨ AI Generate</button>
                        <button class="add-post-btn" onclick="openModal('social-post-modal')">+ Add Post</button>
                    </div>
                </div>

                <!-- Status Filter -->
                <div style="margin-bottom: 1.5rem;">
                    <div class="social-filters">
                        <button class="social-filter-btn active" data-status="all">All Status</button>
                        <button class="social-filter-btn" data-status="draft">Drafts</button>
                        <button class="social-filter-btn" data-status="approved">Approved</button>
                        <button class="social-filter-btn" data-status="posted">Posted</button>
                    </div>
                </div>

                <!-- Posts Grid -->
                <div class="social-posts-grid" id="social-posts-container">
                    <!-- Posts will be rendered here by JavaScript -->
                </div>

                <!-- Empty State -->
                <div class="social-empty-state" id="social-empty-state" style="display: none;">
                    <h3>No Posts Yet</h3>
                    <p>Create your first social media post or generate one with AI</p>
                    <button class="generate-btn" onclick="openAIGenerateModal()" style="background: linear-gradient(135deg, #10a37f, #0d8c6d);">✨ AI Generate Your First Post</button>
                </div>
            </section>

            <!-- Email Campaigns Page -->
            <section class="page-content" id="page-email-campaigns" role="tabpanel" aria-labelledby="email-campaigns-heading">
                <div class="page-header">
                    <h1 id="email-campaigns-heading">Email Campaigns</h1>
                    <p>Repository of sent email campaigns for reference and reuse</p>
                </div>

                <!-- Stats Cards -->
                <div class="social-stats">
                    <div class="social-stat-card" style="background: linear-gradient(135deg, #3B82F6 0%, #1D4ED8 100%);">
                        <div class="social-stat-number" id="email-stat-total">0</div>
                        <div class="social-stat-label">Total Emails</div>
                    </div>
                    <div class="social-stat-card" style="background: linear-gradient(135deg, #8B5CF6 0%, #6D28D9 100%);">
                        <div class="social-stat-number" id="email-stat-edmund">0</div>
                        <div class="social-stat-label">Edmund's</div>
                    </div>
                    <div class="social-stat-card" style="background: linear-gradient(135deg, #EC4899 0%, #BE185D 100%);">
                        <div class="social-stat-number" id="email-stat-samantha">0</div>
                        <div class="social-stat-label">Samantha's</div>
                    </div>
                    <div class="social-stat-card" style="background: linear-gradient(135deg, #10B981 0%, #047857 100%);">
                        <div class="social-stat-number" id="email-stat-dina">0</div>
                        <div class="social-stat-label">Dina's</div>
                    </div>
                </div>

                <!-- Filters and Actions -->
                <div class="social-media-header">
                    <div class="social-filters">
                        <button class="social-filter-btn active" data-email-sender="all">All Senders</button>
                        <button class="social-filter-btn" data-email-sender="edmund" style="--filter-color: #3B82F6;">Edmund</button>
                        <button class="social-filter-btn" data-email-sender="samantha" style="--filter-color: #EC4899;">Samantha</button>
                        <button class="social-filter-btn" data-email-sender="dina" style="--filter-color: #10B981;">Dina</button>
                    </div>
                    <button class="add-post-btn" onclick="openModal('email-campaign-modal')">+ Add Email</button>
                </div>

                <!-- Search -->
                <div style="margin-bottom: 1.5rem;">
                    <input type="text" id="email-search" placeholder="Search emails by subject or content..."
                           style="width: 100%; padding: 0.75rem 1rem; border: 1px solid var(--gray-300); border-radius: 8px; font-size: 0.9375rem;"
                           oninput="renderEmailCampaigns()">
                </div>

                <!-- Email List -->
                <div id="email-campaigns-container">
                    <!-- Emails will be rendered here by JavaScript -->
                </div>

                <!-- Empty State -->
                <div class="social-empty-state" id="email-empty-state" style="display: none;">
                    <h3>No Email Campaigns Yet</h3>
                    <p>Add your first email campaign to build your reference library</p>
                    <button class="add-post-btn" onclick="openModal('email-campaign-modal')">+ Add Your First Email</button>
                </div>
            </section>

            <!-- Ops Execution Page -->
            <section class="page-content" id="page-ops" role="tabpanel" aria-labelledby="ops-heading">
                <div class="page-header">
                    <h1 id="ops-heading">Operations Execution</h1>
                    <p>Transaction checklists, closing calendar, and bonus tracking</p>
                </div>

                <!-- Nicole's Bonus Tracker -->
                <div class="metrics-grid" style="grid-template-columns: repeat(3, 1fr);">
                    <div class="metric-card">
                        <div class="metric-label">Deals Closed YTD</div>
                        <div class="metric-value neutral" id="ops-deals-closed">0</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Nicole Bonus Earned</div>
                        <div class="metric-value positive" id="ops-bonus-earned">$0</div>
                        <div class="metric-subtitle">$1,000 per closed deal</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Projected Annual Bonus</div>
                        <div class="metric-value neutral" id="ops-bonus-projected">$14,000</div>
                        <div class="metric-subtitle">Based on 14-deal target</div>
                    </div>
                </div>

                <!-- Closing Calendar -->
                <div class="card" style="margin-bottom: 1.5rem;">
                    <div class="card-header">
                        <h3>Closing Calendar</h3>
                    </div>
                    <div class="card-body">
                        <div class="table-wrapper">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Est. Close Date</th>
                                        <th>Property</th>
                                        <th>Price</th>
                                        <th>Stage</th>
                                        <th>Checklist</th>
                                    </tr>
                                </thead>
                                <tbody id="closing-calendar-table">
                                    <tr>
                                        <td colspan="5" style="text-align: center; color: var(--gray-400);">No upcoming closings</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Transaction Checklist Template -->
                <div class="card">
                    <div class="card-header">
                        <h3>Transaction Checklist Template</h3>
                    </div>
                    <div class="card-body">
                        <ul class="checklist">
                            <li class="checklist-item">
                                <div class="checklist-checkbox"></div>
                                <span class="checklist-text">Listing agreement signed</span>
                            </li>
                            <li class="checklist-item">
                                <div class="checklist-checkbox"></div>
                                <span class="checklist-text">Property photos scheduled/completed</span>
                            </li>
                            <li class="checklist-item">
                                <div class="checklist-checkbox"></div>
                                <span class="checklist-text">MLS listing created</span>
                            </li>
                            <li class="checklist-item">
                                <div class="checklist-checkbox"></div>
                                <span class="checklist-text">Marketing materials distributed</span>
                            </li>
                            <li class="checklist-item">
                                <div class="checklist-checkbox"></div>
                                <span class="checklist-text">Offer received</span>
                            </li>
                            <li class="checklist-item">
                                <div class="checklist-checkbox"></div>
                                <span class="checklist-text">Contract executed</span>
                            </li>
                            <li class="checklist-item">
                                <div class="checklist-checkbox"></div>
                                <span class="checklist-text">Escrow opened</span>
                            </li>
                            <li class="checklist-item">
                                <div class="checklist-checkbox"></div>
                                <span class="checklist-text">Inspection completed</span>
                            </li>
                            <li class="checklist-item">
                                <div class="checklist-checkbox"></div>
                                <span class="checklist-text">Appraisal completed</span>
                            </li>
                            <li class="checklist-item">
                                <div class="checklist-checkbox"></div>
                                <span class="checklist-text">Loan approved</span>
                            </li>
                            <li class="checklist-item">
                                <div class="checklist-checkbox"></div>
                                <span class="checklist-text">Final walkthrough scheduled</span>
                            </li>
                            <li class="checklist-item">
                                <div class="checklist-checkbox"></div>
                                <span class="checklist-text">Closing documents prepared</span>
                            </li>
                            <li class="checklist-item">
                                <div class="checklist-checkbox"></div>
                                <span class="checklist-text">Closing completed</span>
                            </li>
                            <li class="checklist-item">
                                <div class="checklist-checkbox"></div>
                                <span class="checklist-text">Commission disbursed</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- Settings Page (Admin Only) -->
            <section class="page-content" id="page-settings" role="tabpanel" aria-labelledby="settings-heading">
                <div class="page-header">
                    <h1 id="settings-heading">Plan Settings</h1>
                    <p>Configure assumptions and team permissions</p>
                </div>

                <div class="grid-2">
                    <!-- Financial Assumptions -->
                    <div class="card">
                        <div class="card-header">
                            <h3>Financial Assumptions</h3>
                        </div>
                        <div class="card-body">
                            <div class="form-group">
                                <label>Default Commission Rate (%)</label>
                                <input type="number" id="setting-commission-rate" value="5.0" step="0.1">
                            </div>
                            <div class="form-group">
                                <label>Edmund Brokerage Split (% Edmund Keeps)</label>
                                <input type="number" id="setting-edmund-brokerage" value="80" step="1">
                                <small style="color: var(--gray-500); font-size: 0.75rem;">Edmund keeps 80%, 20% goes to Douglas Elliman</small>
                            </div>
                            <div class="form-group">
                                <label>Agent Brokerage Split (% Agent Keeps)</label>
                                <input type="number" id="setting-agent-brokerage" value="70" step="1">
                                <small style="color: var(--gray-500); font-size: 0.75rem;">Agents keep 70%, 30% goes to Douglas Elliman</small>
                            </div>
                            <div class="form-group">
                                <label>Edmund Share - Edmund Originated (%)</label>
                                <input type="number" id="setting-edmund-originated" value="60" step="1">
                            </div>
                            <div class="form-group">
                                <label>Edmund Share - Agent Originated (%)</label>
                                <input type="number" id="setting-agent-originated" value="40" step="1">
                            </div>
                            <div class="form-group">
                                <label>Nicole Bonus per Deal ($)</label>
                                <input type="number" id="setting-nicole-bonus" value="1000" step="100">
                            </div>
                            <div class="form-group">
                                <label>Monthly Floor Requirement ($)</label>
                                <input type="number" id="setting-monthly-floor" value="25000" step="1000">
                            </div>
                            <div class="form-group">
                                <label>Monthly Operating Costs ($)</label>
                                <input type="number" id="setting-monthly-ops" value="10000" step="500">
                            </div>
                            <button class="btn btn-primary" onclick="saveSettings()">Save Settings</button>
                        </div>
                    </div>

                    <!-- Stop-Loss Rules -->
                    <div class="card">
                        <div class="card-header">
                            <h3>Stop-Loss Rules</h3>
                        </div>
                        <div class="card-body">
                            <p style="font-size: 0.875rem; color: var(--gray-600); margin-bottom: 1rem;">
                                No new projects, tools, or systems if any of these conditions are true:
                            </p>
                            <ul class="checklist">
                                <li class="checklist-item">
                                    <span class="checklist-text">Active seller count < 16</span>
                                </li>
                                <li class="checklist-item">
                                    <span class="checklist-text">60-day forecast < $70,000 net</span>
                                </li>
                                <li class="checklist-item">
                                    <span class="checklist-text">2 consecutive weeks without pricing conversations</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- AI Content Generation Settings -->
                <div class="card" style="margin-top: 1.5rem; border: 2px solid #10a37f;">
                    <div class="card-header" style="background: linear-gradient(135deg, #10a37f15, #10a37f05);">
                        <h3 style="color: #10a37f;">AI Content Generation</h3>
                    </div>
                    <div class="card-body">
                        <p style="font-size: 0.875rem; color: var(--gray-600); margin-bottom: 1rem;">
                            Configure AI-powered social media post and image generation. Your API key is stored locally in your browser only.
                        </p>

                        <div class="form-group">
                            <label>OpenAI API Key <span style="font-weight: normal; color: var(--gray-500);">(for text generation)</span></label>
                            <div style="display: flex; gap: 0.5rem;">
                                <input type="password" id="setting-openai-key" placeholder="sk-..." style="flex: 1;">
                                <button class="btn btn-secondary" onclick="toggleApiKeyVisibility('openai')" style="padding: 0.5rem 0.75rem;">
                                    <span id="api-key-toggle-icon-openai">Show</span>
                                </button>
                            </div>
                            <small style="color: var(--gray-500); font-size: 0.75rem;">Get your key at <a href="https://platform.openai.com/api-keys" target="_blank">platform.openai.com/api-keys</a></small>
                        </div>

                        <div style="background: linear-gradient(135deg, #f0fdf4, #ecfdf5); padding: 1rem; border-radius: 8px; margin-bottom: 1rem; border: 1px solid #86efac;">
                            <p style="font-size: 0.875rem; color: #166534; margin: 0;">
                                <strong>Image Style:</strong> Your branded "Chaotic Real Estate" editorial cartoon style. No central figure - just the frantic scene with your signature look.
                            </p>
                        </div>

                        <div class="form-group">
                            <label>Brand Colors</label>
                            <div style="display: flex; gap: 1rem; align-items: center;">
                                <div style="display: flex; align-items: center; gap: 0.5rem;">
                                    <input type="color" id="setting-brand-color-1" value="#1e3a5f" style="width: 40px; height: 32px; border: none; cursor: pointer;">
                                    <span style="font-size: 0.75rem;">Primary (Navy)</span>
                                </div>
                                <div style="display: flex; align-items: center; gap: 0.5rem;">
                                    <input type="color" id="setting-brand-color-2" value="#c9a962" style="width: 40px; height: 32px; border: none; cursor: pointer;">
                                    <span style="font-size: 0.75rem;">Secondary (Gold)</span>
                                </div>
                            </div>
                        </div>

                        <div style="display: flex; gap: 1rem; flex-wrap: wrap; margin-top: 1rem;">
                            <button class="btn btn-primary" onclick="saveAISettings()" style="background: #10a37f; border-color: #10a37f;">Save AI Settings</button>
                            <button class="btn btn-secondary" onclick="testOpenAIConnection()">Test Connection</button>
                        </div>

                        <div id="ai-connection-status" style="margin-top: 1rem; display: none;"></div>
                    </div>
                </div>

                <!-- Backup & Restore (Prominent Section) -->
                <div class="card" style="margin-top: 1.5rem; border: 2px solid var(--brand-primary);">
                    <div class="card-header" style="background: var(--brand-primary-light);">
                        <h3 style="color: var(--brand-primary);">Backup & Restore</h3>
                    </div>
                    <div class="card-body">
                        <p style="font-size: 0.875rem; color: var(--gray-600); margin-bottom: 1rem;">
                            <strong>Important:</strong> Create regular backups to protect your data. Backup files can be restored at any time to recover your clients, contacts, and all settings.
                        </p>
                        <div style="display: flex; gap: 1rem; flex-wrap: wrap; margin-bottom: 1.5rem;">
                            <button class="btn btn-primary" onclick="createBackup()" style="padding: 0.75rem 1.5rem;">
                                Download Full Backup
                            </button>
                            <button class="btn btn-secondary" onclick="document.getElementById('restore-file').click()" style="padding: 0.75rem 1.5rem;">
                                Restore from Backup
                            </button>
                            <input type="file" id="restore-file" accept=".json" style="display: none;" onchange="restoreBackup(event)">
                        </div>
                        <div style="background: var(--gray-100); padding: 1rem; border-radius: 8px; font-size: 0.8125rem;">
                            <div style="font-weight: 600; margin-bottom: 0.5rem;">Data Storage:</div>
                            <ul style="margin: 0; padding-left: 1.25rem; color: var(--gray-600);">
                                <li><strong>Browser (localStorage):</strong> Saved instantly, but lost if you clear browser data</li>
                                <li><strong>Supabase Cloud:</strong> Syncs automatically when online (shared with team)</li>
                                <li><strong>Backup File:</strong> Download regularly and store safely for disaster recovery</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Data Management -->
                <div class="card" style="margin-top: 1.5rem;">
                    <div class="card-header">
                        <h3>Advanced Data Management</h3>
                    </div>
                    <div class="card-body">
                        <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                            <button class="btn btn-secondary" onclick="exportData()">Export Raw JSON</button>
                            <button class="btn btn-secondary" onclick="exportContacts()">Export Contacts (CSV)</button>
                            <button class="btn btn-secondary" onclick="document.getElementById('import-file').click()">Import Data</button>
                            <input type="file" id="import-file" accept=".json" style="display: none;" onchange="importData(event)">
                            <button class="btn btn-danger" onclick="resetData()">Reset All Data</button>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Social Post Modal -->
    <div class="modal-overlay" id="social-post-modal">
        <div class="modal" style="max-width: 650px;">
            <div class="modal-header">
                <h3 id="social-post-modal-title">Create Social Post</h3>
                <button class="modal-close" onclick="closeModal('social-post-modal')" aria-label="Close modal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="social-post-form">
                    <input type="hidden" id="social-post-id">

                    <div class="form-group">
                        <label>Platform</label>
                        <div class="platform-select-grid">
                            <button type="button" class="platform-select-btn instagram" data-platform="instagram" onclick="selectPlatform('instagram')">
                                <svg viewBox="0 0 24 24" width="24" height="24"><path fill="#E4405F" d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/></svg>
                                Instagram
                            </button>
                            <button type="button" class="platform-select-btn facebook" data-platform="facebook" onclick="selectPlatform('facebook')">
                                <svg viewBox="0 0 24 24" width="24" height="24"><path fill="#1877F2" d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>
                                Facebook
                            </button>
                            <button type="button" class="platform-select-btn linkedin" data-platform="linkedin" onclick="selectPlatform('linkedin')">
                                <svg viewBox="0 0 24 24" width="24" height="24"><path fill="#0A66C2" d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
                                LinkedIn
                            </button>
                            <button type="button" class="platform-select-btn twitter" data-platform="twitter" onclick="selectPlatform('twitter')">
                                <svg viewBox="0 0 24 24" width="24" height="24"><path fill="#000000" d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
                                Twitter/X
                            </button>
                            <button type="button" class="platform-select-btn tiktok" data-platform="tiktok" onclick="selectPlatform('tiktok')">
                                <svg viewBox="0 0 24 24" width="24" height="24"><path fill="#000000" d="M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.02 1.48-.04 2.96-.04 4.44-.99-.32-2.15-.23-3.02.37-.63.41-1.11 1.04-1.36 1.75-.21.51-.15 1.07-.14 1.61.24 1.64 1.82 3.02 3.5 2.87 1.12-.01 2.19-.66 2.77-1.61.19-.33.4-.67.41-1.06.1-1.79.06-3.57.07-5.36.01-4.03-.01-8.05.02-12.07z"/></svg>
                                TikTok
                            </button>
                        </div>
                        <input type="hidden" id="social-platform" required>
                    </div>

                    <div class="form-group">
                        <label>Topic</label>
                        <div class="topic-select-grid">
                            <button type="button" class="topic-select-btn" data-topic="real-estate" onclick="selectTopic('real-estate')">South Florida Real Estate</button>
                            <button type="button" class="topic-select-btn" data-topic="douglas-elliman" onclick="selectTopic('douglas-elliman')">Douglas Elliman</button>
                            <button type="button" class="topic-select-btn" data-topic="ai" onclick="selectTopic('ai')">AI & ChatGPT</button>
                            <button type="button" class="topic-select-btn" data-topic="market-update" onclick="selectTopic('market-update')">Market Update</button>
                            <button type="button" class="topic-select-btn" data-topic="personal" onclick="selectTopic('personal')">Personal Brand</button>
                        </div>
                        <input type="hidden" id="social-topic" required>
                    </div>

                    <div class="form-group">
                        <label>Post Content</label>
                        <textarea id="social-content" rows="6" style="width: 100%; padding: 0.75rem; border: 1px solid var(--gray-300); border-radius: 6px; font-family: inherit; resize: vertical;" placeholder="Write your post content here..." required></textarea>
                        <small style="color: var(--gray-500); font-size: 0.75rem;">
                            Character count: <span id="char-count">0</span> |
                            <span id="platform-limit">Select a platform to see limit</span>
                        </small>
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                        <div class="form-group">
                            <label>Scheduled Date</label>
                            <input type="date" id="social-scheduled-date" style="width: 100%;">
                        </div>
                        <div class="form-group">
                            <label>Scheduled Time</label>
                            <input type="time" id="social-scheduled-time" style="width: 100%;">
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Media URL <span style="font-weight: normal; color: var(--gray-500);">(Canva link, image URL, etc.)</span></label>
                        <input type="url" id="social-media-url" placeholder="https://www.canva.com/design/..." style="width: 100%;">
                    </div>

                    <div class="form-group">
                        <label>Status</label>
                        <select id="social-status">
                            <option value="draft">Draft</option>
                            <option value="approved">Approved</option>
                            <option value="posted">Posted</option>
                        </select>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('social-post-modal')">Cancel</button>
                <button class="btn btn-primary" onclick="saveSocialPost()">Save Post</button>
            </div>
        </div>
    </div>

    <!-- AI Generate Post Modal -->
    <div class="modal-overlay" id="ai-generate-modal">
        <div class="modal" style="max-width: 700px;">
            <div class="modal-header" style="background: linear-gradient(135deg, #10a37f15, #10a37f05);">
                <h3 style="color: #10a37f;">AI Content Generator</h3>
                <button class="modal-close" onclick="closeModal('ai-generate-modal')" aria-label="Close modal">&times;</button>
            </div>
            <div class="modal-body">
                <div id="ai-generate-step-1">
                    <div class="form-group">
                        <label style="font-weight: 600; font-size: 1rem;">What do you want to post about?</label>
                        <textarea id="ai-topic-prompt" rows="3" style="width: 100%; padding: 0.75rem; border: 2px solid #10a37f; border-radius: 8px; font-family: inherit; font-size: 1rem;" placeholder="Example: Interest rates dropped this week, share some insights about what this means for South Florida buyers..."></textarea>
                    </div>

                    <div class="form-group">
                        <label>Platform</label>
                        <select id="ai-platform-select" style="width: 100%;">
                            <option value="instagram">Instagram</option>
                            <option value="facebook">Facebook</option>
                            <option value="linkedin">LinkedIn</option>
                            <option value="twitter">Twitter/X</option>
                            <option value="tiktok">TikTok</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Search for recent news about:</label>
                        <div style="display: flex; flex-wrap: wrap; gap: 0.5rem;">
                            <label style="display: flex; align-items: center; gap: 0.25rem; font-weight: normal; cursor: pointer;">
                                <input type="checkbox" id="ai-search-sofla" checked> South Florida Real Estate
                            </label>
                            <label style="display: flex; align-items: center; gap: 0.25rem; font-weight: normal; cursor: pointer;">
                                <input type="checkbox" id="ai-search-elliman" checked> Douglas Elliman
                            </label>
                            <label style="display: flex; align-items: center; gap: 0.25rem; font-weight: normal; cursor: pointer;">
                                <input type="checkbox" id="ai-search-standrews"> St. Andrews Country Club
                            </label>
                            <label style="display: flex; align-items: center; gap: 0.25rem; font-weight: normal; cursor: pointer;">
                                <input type="checkbox" id="ai-search-national"> National Real Estate News
                            </label>
                        </div>
                    </div>

                    <div class="form-group">
                        <label style="display: flex; align-items: center; gap: 0.5rem;">
                            <input type="checkbox" id="ai-generate-image" checked>
                            Generate cartoon image to go with post
                        </label>
                    </div>

                    <button class="btn btn-primary" onclick="generateAIPost()" style="width: 100%; background: #10a37f; border-color: #10a37f; padding: 0.875rem; font-size: 1rem;">
                        Generate Content
                    </button>
                </div>

                <div id="ai-generate-loading" style="display: none; text-align: center; padding: 2rem;">
                    <div style="font-size: 2rem; margin-bottom: 1rem;">🔄</div>
                    <div id="ai-loading-status" style="font-weight: 600; color: #10a37f;">Searching for news...</div>
                    <div style="margin-top: 1rem; height: 4px; background: var(--gray-200); border-radius: 2px; overflow: hidden;">
                        <div id="ai-progress-bar" style="width: 0%; height: 100%; background: #10a37f; transition: width 0.3s;"></div>
                    </div>
                </div>

                <div id="ai-generate-result" style="display: none;">
                    <div class="form-group">
                        <label style="font-weight: 600;">Generated Post</label>
                        <textarea id="ai-generated-content" rows="6" style="width: 100%; padding: 0.75rem; border: 1px solid var(--gray-300); border-radius: 6px; font-family: inherit;"></textarea>
                    </div>

                    <div id="ai-generated-image-container" style="display: none; margin-bottom: 1rem;">
                        <label style="font-weight: 600; display: block; margin-bottom: 0.5rem;">Generated Image</label>
                        <img id="ai-generated-image" style="max-width: 100%; border-radius: 8px; border: 1px solid var(--gray-300);">
                        <input type="hidden" id="ai-generated-image-url">
                    </div>

                    <div id="ai-news-sources" style="background: var(--gray-100); padding: 0.75rem; border-radius: 6px; margin-bottom: 1rem; font-size: 0.8125rem;">
                        <strong>News sources used:</strong>
                        <div id="ai-sources-list" style="margin-top: 0.5rem; color: var(--gray-600);"></div>
                    </div>

                    <div style="display: flex; gap: 0.75rem;">
                        <button class="btn btn-secondary" onclick="regenerateAIPost()" style="flex: 1;">Regenerate</button>
                        <button class="btn btn-primary" onclick="useAIGeneratedPost()" style="flex: 1; background: #10a37f; border-color: #10a37f;">Use This Post</button>
                    </div>
                </div>

                <div id="ai-generate-error" style="display: none; padding: 1rem; background: #fee2e2; color: #dc2626; border-radius: 8px; margin-top: 1rem;">
                    <strong>Error:</strong> <span id="ai-error-message"></span>
                </div>
            </div>
        </div>
    </div>

    <!-- Email Campaign Modal -->
    <div class="modal-overlay" id="email-campaign-modal">
        <div class="modal" style="max-width: 800px;">
            <div class="modal-header">
                <h3 id="email-campaign-modal-title">Add Email Campaign</h3>
                <button class="modal-close" onclick="closeModal('email-campaign-modal')" aria-label="Close modal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="email-campaign-form">
                    <input type="hidden" id="email-campaign-id">

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                        <div class="form-group">
                            <label>Sender</label>
                            <select id="email-sender" required>
                                <option value="">Select sender...</option>
                                <option value="edmund">Edmund</option>
                                <option value="samantha">Samantha</option>
                                <option value="dina">Dina</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Date Sent</label>
                            <input type="date" id="email-date-sent" required style="width: 100%;">
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Subject Line</label>
                        <input type="text" id="email-subject" required placeholder="Enter email subject...">
                    </div>

                    <div class="form-group">
                        <label>Audience/List <span style="font-weight: normal; color: var(--gray-500);">(optional)</span></label>
                        <input type="text" id="email-audience" placeholder="e.g., St Andrews Club Members, Past Clients, Sphere...">
                    </div>

                    <div class="form-group">
                        <label>Email Content (HTML)</label>
                        <textarea id="email-html-content" rows="12"
                                  style="width: 100%; padding: 0.75rem; border: 1px solid var(--gray-300); border-radius: 6px; font-family: 'Monaco', 'Menlo', monospace; font-size: 0.8125rem; resize: vertical;"
                                  placeholder="Paste your HTML email content here..."></textarea>
                        <small style="color: var(--gray-500); font-size: 0.75rem;">
                            Paste the full HTML of your email. You can get this from Constant Contact, Mailchimp, or your email builder.
                        </small>
                    </div>

                    <div class="form-group">
                        <label>Notes <span style="font-weight: normal; color: var(--gray-500);">(optional)</span></label>
                        <textarea id="email-notes" rows="2"
                                  style="width: 100%; padding: 0.75rem; border: 1px solid var(--gray-300); border-radius: 6px; font-family: inherit; resize: vertical;"
                                  placeholder="Any notes about this campaign..."></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('email-campaign-modal')">Cancel</button>
                <button class="btn btn-primary" onclick="saveEmailCampaign()">Save Email</button>
            </div>
        </div>
    </div>

    <!-- Email Preview Modal -->
    <div class="modal-overlay" id="email-preview-modal">
        <div class="modal" style="max-width: 900px; height: 90vh; display: flex; flex-direction: column;">
            <div class="modal-header" style="flex-shrink: 0;">
                <div>
                    <h3 id="email-preview-title">Email Preview</h3>
                    <p id="email-preview-meta" style="margin: 0; font-size: 0.8125rem; color: var(--gray-500);"></p>
                </div>
                <button class="modal-close" onclick="closeModal('email-preview-modal')" aria-label="Close modal">&times;</button>
            </div>
            <div class="modal-body" style="flex: 1; overflow: hidden; padding: 0;">
                <iframe id="email-preview-frame" style="width: 100%; height: 100%; border: none;"></iframe>
            </div>
            <div class="modal-footer" style="flex-shrink: 0;">
                <button class="btn btn-secondary" onclick="closeModal('email-preview-modal')">Close</button>
                <button class="btn btn-outline" onclick="copyEmailHtml()">Copy HTML</button>
                <button class="btn btn-primary" onclick="editCurrentEmail()">Edit</button>
            </div>
        </div>
    </div>

    <!-- Add Client Modal -->
    <div class="modal-overlay" id="seller-modal">
        <div class="modal">
            <div class="modal-header">
                <h3 id="seller-modal-title">Add Contact</h3>
                <button class="modal-close" onclick="closeModal('seller-modal')" aria-label="Close modal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="seller-form">
                    <input type="hidden" id="seller-id">
                    <input type="hidden" id="seller-type" value="seller">
                    <div class="form-group">
                        <label>Contact Name</label>
                        <input type="text" id="seller-name" required placeholder="e.g., John Smith">
                    </div>

                    <!-- Tags Section -->
                    <div class="form-group">
                        <label>Relationship Tags <span style="font-weight: normal; color: var(--gray-500);">(select all that apply)</span></label>
                        <div id="contact-tags" style="display: flex; flex-wrap: wrap; gap: 0.5rem; margin-top: 0.5rem;">
                            <label style="display: flex; align-items: center; gap: 0.35rem; padding: 0.5rem 0.75rem; background: var(--gray-100); border-radius: 20px; cursor: pointer; font-size: 0.8125rem; border: 2px solid transparent; transition: all 0.2s;">
                                <input type="checkbox" name="contact-tag" value="seller" onchange="updateTagStyles(); toggleClientTypeFields();" style="accent-color: var(--brand-primary);">
                                Seller
                            </label>
                            <label style="display: flex; align-items: center; gap: 0.35rem; padding: 0.5rem 0.75rem; background: var(--gray-100); border-radius: 20px; cursor: pointer; font-size: 0.8125rem; border: 2px solid transparent; transition: all 0.2s;">
                                <input type="checkbox" name="contact-tag" value="buyer" onchange="updateTagStyles(); toggleClientTypeFields();" style="accent-color: var(--brand-primary);">
                                Buyer
                            </label>
                            <label style="display: flex; align-items: center; gap: 0.35rem; padding: 0.5rem 0.75rem; background: var(--gray-100); border-radius: 20px; cursor: pointer; font-size: 0.8125rem; border: 2px solid transparent; transition: all 0.2s;">
                                <input type="checkbox" name="contact-tag" value="lead-source" onchange="updateTagStyles();" style="accent-color: var(--brand-primary);">
                                Lead Source
                            </label>
                            <label style="display: flex; align-items: center; gap: 0.35rem; padding: 0.5rem 0.75rem; background: var(--gray-100); border-radius: 20px; cursor: pointer; font-size: 0.8125rem; border: 2px solid transparent; transition: all 0.2s;">
                                <input type="checkbox" name="contact-tag" value="past-client" onchange="updateTagStyles();" style="accent-color: var(--brand-primary);">
                                Past Client
                            </label>
                            <label style="display: flex; align-items: center; gap: 0.35rem; padding: 0.5rem 0.75rem; background: var(--gray-100); border-radius: 20px; cursor: pointer; font-size: 0.8125rem; border: 2px solid transparent; transition: all 0.2s;">
                                <input type="checkbox" name="contact-tag" value="investor" onchange="updateTagStyles();" style="accent-color: var(--brand-primary);">
                                Investor
                            </label>
                            <label style="display: flex; align-items: center; gap: 0.35rem; padding: 0.5rem 0.75rem; background: var(--gray-100); border-radius: 20px; cursor: pointer; font-size: 0.8125rem; border: 2px solid transparent; transition: all 0.2s;">
                                <input type="checkbox" name="contact-tag" value="sphere" onchange="updateTagStyles();" style="accent-color: var(--brand-primary);">
                                Sphere
                            </label>
                            <label style="display: flex; align-items: center; gap: 0.35rem; padding: 0.5rem 0.75rem; background: var(--gray-100); border-radius: 20px; cursor: pointer; font-size: 0.8125rem; border: 2px solid transparent; transition: all 0.2s;">
                                <input type="checkbox" name="contact-tag" value="prospect" onchange="updateTagStyles();" style="accent-color: var(--brand-primary);">
                                Prospect
                            </label>
                        </div>
                    </div>

                    <!-- Contact Information Section -->
                    <div style="background: var(--gray-100); padding: 1rem; border-radius: 8px; margin: 1rem 0;">
                        <h4 style="margin: 0 0 1rem 0; font-size: 0.875rem; color: var(--navy); text-transform: uppercase; letter-spacing: 0.05em;">Contact Information</h4>
                        <div class="form-group">
                            <label>Mobile Phone</label>
                            <input type="tel" id="seller-phone" placeholder="e.g., (561) 555-1234">
                        </div>
                        <div class="form-group">
                            <label>Email</label>
                            <input type="email" id="seller-email" placeholder="e.g., john@email.com">
                        </div>
                        <div class="form-group">
                            <label>Current Address</label>
                            <input type="text" id="seller-current-address" placeholder="e.g., 456 Current St, City, State ZIP">
                        </div>
                        <div class="form-group">
                            <label>Preferred Contact Method</label>
                            <select id="seller-contact-pref">
                                <option value="">-- Select --</option>
                                <option value="call">Phone Call</option>
                                <option value="text">Text Message</option>
                                <option value="email">Email</option>
                                <option value="any">Any Method</option>
                            </select>
                        </div>
                    </div>

                    <!-- Spouse/Partner Section -->
                    <div style="background: var(--brand-primary-light); padding: 1rem; border-radius: 8px; margin: 1rem 0;">
                        <h4 style="margin: 0 0 1rem 0; font-size: 0.875rem; color: var(--navy); text-transform: uppercase; letter-spacing: 0.05em;">Spouse / Partner</h4>
                        <div class="form-group">
                            <label>Spouse/Partner Name</label>
                            <input type="text" id="seller-spouse-name" placeholder="e.g., Jane Smith">
                        </div>
                        <div class="form-group">
                            <label>Spouse/Partner Phone</label>
                            <input type="tel" id="seller-spouse-phone" placeholder="e.g., (561) 555-5678">
                        </div>
                        <div class="form-group">
                            <label>Spouse/Partner Email</label>
                            <input type="email" id="seller-spouse-email" placeholder="e.g., jane@email.com">
                        </div>
                    </div>

                    <div class="form-group" id="field-address">
                        <label>Property Address</label>
                        <input type="text" id="seller-address" placeholder="e.g., 123 Main St">
                    </div>
                    <div class="form-group">
                        <label id="label-community">Community</label>
                        <input type="text" id="seller-community" placeholder="e.g., Saint Andrews">
                    </div>

                    <!-- Seller-specific fields -->
                    <div id="seller-fields">
                        <div class="form-group">
                            <label>Estimated Value ($)</label>
                            <input type="number" id="seller-value" placeholder="e.g., 2500000">
                        </div>
                        <div class="form-group">
                            <label>Pricing Range Discussed?</label>
                            <input type="text" id="seller-pricing" placeholder="e.g., $2.4M - $2.6M">
                        </div>
                    </div>

                    <!-- Buyer-specific fields -->
                    <div id="buyer-fields" style="display: none;">
                        <div class="form-group">
                            <label>Budget Min ($)</label>
                            <input type="number" id="buyer-budget-min" placeholder="e.g., 2000000">
                        </div>
                        <div class="form-group">
                            <label>Budget Max ($)</label>
                            <input type="number" id="buyer-budget-max" placeholder="e.g., 3000000">
                        </div>
                        <div class="form-group">
                            <label>Pre-Approval Status</label>
                            <select id="buyer-preapproval">
                                <option value="none">Not Pre-Approved</option>
                                <option value="pending">Pre-Approval Pending</option>
                                <option value="approved">Pre-Approved</option>
                                <option value="cash">Cash Buyer</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Timing Window</label>
                        <select id="seller-timing">
                            <option value="0-3">0-3 months</option>
                            <option value="3-6">3-6 months</option>
                            <option value="6-12">6-12 months</option>
                            <option value="12-18">12-18 months</option>
                            <option value="18+">18+ months</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Pipeline Stage</label>
                        <select id="seller-stage">
                            <option value="prospect">Prospect</option>
                            <option value="active">Active</option>
                            <option value="listing-meeting" class="seller-stage-option">Listing Meeting</option>
                            <option value="showing" class="buyer-stage-option" style="display: none;">Showing</option>
                            <option value="listed" class="seller-stage-option">Listed</option>
                            <option value="under-contract">Under Contract</option>
                            <option value="closed">Closed</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Next Action</label>
                        <input type="text" id="seller-next-action" placeholder="e.g., Schedule listing presentation">
                    </div>
                    <div class="form-group">
                        <label>Deal Originator</label>
                        <select id="seller-originator">
                            <option value="edmund">Edmund</option>
                            <option value="dina">Dina</option>
                            <option value="samantha">Samantha</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Referred By (Lead Source)</label>
                        <select id="seller-lead-source">
                            <option value="">-- No referral / Direct --</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Close Probability (%)</label>
                        <input type="number" id="seller-probability" value="50" min="0" max="100">
                    </div>
                    <div class="form-group">
                        <label>Estimated Close Date</label>
                        <input type="date" id="seller-close-date">
                    </div>
                    <div class="form-group">
                        <label>Notes</label>
                        <textarea id="seller-notes" rows="3" style="width: 100%; padding: 0.75rem; border: 1px solid var(--gray-300); border-radius: 6px;"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('seller-modal')">Cancel</button>
                <button class="btn btn-primary" onclick="saveSeller()">Save Contact</button>
            </div>
        </div>
    </div>

    <!-- Activity Log Modal -->
    <div class="modal-overlay" id="activity-modal">
        <div class="modal">
            <div class="modal-header">
                <h3>Log Activity</h3>
                <button class="modal-close" onclick="closeModal('activity-modal')" aria-label="Close modal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="activity-form">
                    <input type="hidden" id="activity-seller-id">
                    <div class="form-group">
                        <label>Activity Type</label>
                        <select id="activity-type">
                            <option value="seller_call">Seller Call</option>
                            <option value="seller_meeting">Seller Meeting</option>
                            <option value="pricing_discussion">Pricing Discussion</option>
                            <option value="listing_appointment">Listing Appointment</option>
                            <option value="showing">Showing</option>
                            <option value="offer_received">Offer Received</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Date</label>
                        <input type="date" id="activity-date">
                    </div>
                    <div class="form-group">
                        <label>Notes</label>
                        <textarea id="activity-notes" rows="4" style="width: 100%; padding: 0.75rem; border: 1px solid var(--gray-300); border-radius: 6px;" placeholder="What was discussed? Any pricing mentioned?"></textarea>
                    </div>
                    <div class="form-group">
                        <label>Outcome</label>
                        <select id="activity-outcome">
                            <option value="positive">Positive - Moving forward</option>
                            <option value="neutral">Neutral - No change</option>
                            <option value="negative">Negative - Cooling off</option>
                        </select>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('activity-modal')">Cancel</button>
                <button class="btn btn-primary" onclick="saveActivity()">Log Activity</button>
            </div>
        </div>
    </div>

    <!-- Contact Detail Modal -->
    <div class="modal-overlay" id="client-detail-modal">
        <div class="modal" style="max-width: 700px;">
            <div class="modal-header">
                <h3 id="client-detail-title">Contact Details</h3>
                <button class="modal-close" onclick="closeModal('client-detail-modal')" aria-label="Close modal">&times;</button>
            </div>
            <div class="modal-body">
                <!-- Client Info Summary -->
                <div id="client-detail-info" style="margin-bottom: 1.5rem;"></div>

                <!-- Activity History -->
                <div class="card">
                    <div class="card-header">
                        <h3 style="font-size: 1rem;">Activity History</h3>
                        <button class="btn btn-primary" style="padding: 0.5rem 1rem; font-size: 0.8125rem;" onclick="logActivityFromDetail()">+ Log Activity</button>
                    </div>
                    <div class="card-body" style="max-height: 300px; overflow-y: auto;">
                        <div id="client-activity-list">
                            <p style="color: var(--gray-400); text-align: center;">No activities logged yet</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('client-detail-modal')">Close</button>
                <button class="btn btn-primary" onclick="editClientFromDetail()">Edit Client</button>
            </div>
        </div>
    </div>

    <!-- Lead Source Modal -->
    <div class="modal-overlay" id="lead-source-modal">
        <div class="modal">
            <div class="modal-header">
                <h3 id="lead-source-modal-title">Add Lead Source</h3>
                <button class="modal-close" onclick="closeModal('lead-source-modal')" aria-label="Close modal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="lead-source-form">
                    <input type="hidden" id="lead-source-id">
                    <div class="form-group">
                        <label>Name</label>
                        <input type="text" id="lead-source-name" required placeholder="e.g., John Smith">
                    </div>
                    <div class="form-group">
                        <label>Relationship Type</label>
                        <select id="lead-source-type">
                            <option value="attorney">Attorney</option>
                            <option value="cpa">CPA/Accountant</option>
                            <option value="financial-advisor">Financial Advisor</option>
                            <option value="past-client">Past Client</option>
                            <option value="builder">Builder/Developer</option>
                            <option value="contractor">Contractor</option>
                            <option value="mortgage">Mortgage Broker</option>
                            <option value="title">Title Company</option>
                            <option value="friend">Friend/Family</option>
                            <option value="agent">Other Agent</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Company/Firm</label>
                        <input type="text" id="lead-source-company" placeholder="e.g., Smith Law Firm">
                    </div>
                    <div class="form-group">
                        <label>Phone</label>
                        <input type="tel" id="lead-source-phone" placeholder="e.g., 561-555-1234">
                    </div>
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" id="lead-source-email" placeholder="e.g., john@example.com">
                    </div>
                    <div class="form-group">
                        <label>Notes</label>
                        <textarea id="lead-source-notes" rows="3" style="width: 100%; padding: 0.75rem; border: 1px solid var(--gray-300); border-radius: 6px;" placeholder="How did you meet? Any important details?"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('lead-source-modal')">Cancel</button>
                <button class="btn btn-primary" onclick="saveLeadSource()">Save Lead Source</button>
            </div>
        </div>
    </div>

    <!-- Lead Source Touch Modal -->
    <div class="modal-overlay" id="lead-source-touch-modal">
        <div class="modal">
            <div class="modal-header">
                <h3>Log Touch</h3>
                <button class="modal-close" onclick="closeModal('lead-source-touch-modal')" aria-label="Close modal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="lead-source-touch-form">
                    <input type="hidden" id="touch-lead-source-id">
                    <div class="form-group">
                        <label>Touch Type</label>
                        <select id="touch-type">
                            <option value="call">Phone Call</option>
                            <option value="meeting">In-Person Meeting</option>
                            <option value="lunch">Lunch/Coffee</option>
                            <option value="email">Email</option>
                            <option value="text">Text Message</option>
                            <option value="gift">Sent Gift</option>
                            <option value="event">Event Together</option>
                            <option value="referral-thanks">Referral Thank You</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Date</label>
                        <input type="date" id="touch-date">
                    </div>
                    <div class="form-group">
                        <label>Notes</label>
                        <textarea id="touch-notes" rows="3" style="width: 100%; padding: 0.75rem; border: 1px solid var(--gray-300); border-radius: 6px;" placeholder="What was discussed?"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('lead-source-touch-modal')">Cancel</button>
                <button class="btn btn-primary" onclick="saveLeadSourceTouch()">Log Touch</button>
            </div>
        </div>
    </div>

    <!-- Supabase Client Library -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="app.js"></script>
</body>
</html>
